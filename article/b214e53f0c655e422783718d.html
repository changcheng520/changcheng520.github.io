<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始 - 没位道</title><meta name="description" content="很久以前的前端，没有太多工具化工程化思想，一堆代码塞进去完事儿。如今前端已经很卷，卷到了一个开发环境都够你折腾一宿。那么我们抛开类似nextjs、create-react-app这类的工具或框架，我们该如何从零部署一个属于自己的开发环境呢？这篇文章将讲述如何配置一个基础的脚手架，支持React、TypeScrit和单元测试等必要的功能。在这个基础上，大家能够很方便去个性化脚手架。"/><meta property="og:title" content="理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始 - 没位道"/><meta property="og:description" content="很久以前的前端，没有太多工具化工程化思想，一堆代码塞进去完事儿。如今前端已经很卷，卷到了一个开发环境都够你折腾一宿。那么我们抛开类似nextjs、create-react-app这类的工具或框架，我们该如何从零部署一个属于自己的开发环境呢？这篇文章将讲述如何配置一个基础的脚手架，支持React、TypeScrit和单元测试等必要的功能。在这个基础上，大家能够很方便去个性化脚手架。"/><meta property="og:url" content="https://www.c945.com/article/b214e53f0c655e422783718d.html"/><meta property="og:image" content="https://www.c945.com/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg"/><meta name="next-head-count" content="6"/><link rel="icon" href="/assets/images/favicon/favicon-32x32.png" type="image/x-icon"/><link rel="shortcut icon" href="/assets/images/favicon/favicon-32x32.png" sizes="32x32"/><link rel="apple-touch-icon" href="/assets/images/favicon/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicon/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicon/apple-touch-icon-114x114.png"/><link rel="preload" href="/_next/static/css/6d77a19f8add56c2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6d77a19f8add56c2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a80a7b96b8396f08.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a80a7b96b8396f08.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-803820e42116e4e4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5816f20eb504df5c.js" defer=""></script><script src="/_next/static/chunks/424-328589773c4cbd07.js" defer=""></script><script src="/_next/static/chunks/669-26e51e3e61a246e5.js" defer=""></script><script src="/_next/static/chunks/355-8e546d82173371b2.js" defer=""></script><script src="/_next/static/chunks/782-9ef19db02a591dc2.js" defer=""></script><script src="/_next/static/chunks/pages/article/%5Bid%5D-eb52e5d17e91782f.js" defer=""></script><script src="/_next/static/mA6qrr95JJaIAp835t1EV/_buildManifest.js" defer=""></script><script src="/_next/static/mA6qrr95JJaIAp835t1EV/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main class="main-wrapper"><div class="loading-spirit loaded"><i class="fa fa-spinner fa-spin fa-3x fa-fw margin-bottom"></i></div><div class="styles_back-to-top__xN2cj"><button type="button" class=""><svg width="40" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300.222 300.221"><g><path d="M299.201,93.188c-14.688-25.704-29.988-50.184-43.452-76.5c-3.06-6.12-12.852-4.284-14.688,1.836 c-7.345,26.316-16.524,58.14-15.301,85.068c0,6.12,6.732,7.344,10.404,4.284c0.612,0.612,1.836,0.612,3.061,0.612 c6.731-0.612,13.464-1.836,19.584-2.448c22.031,55.692,39.779,152.388-44.677,158.508c-8.567,0.612-15.3-1.224-20.195-4.896 c11.628-9.792,21.42-22.031,26.315-36.107c6.732-18.36-6.731-57.528-31.824-46.512c-20.195,9.18-24.479,45.899-20.808,64.26 c1.224,5.508,3.06,10.403,4.896,14.688c-1.837,1.225-3.061,1.836-4.896,3.061c-15.912,9.18-34.883,13.464-53.244,12.852 c-13.464-0.612-21.42-7.956-26.316-17.748c16.524-8.567,29.988-22.032,33.66-36.107c7.344-29.988-31.212-49.572-47.124-20.196 c-7.344,13.464-8.568,32.436-4.284,48.96c-0.612,0.612-1.836,0.612-2.448,1.224c-52.632,21.42-68.544-45.288-38.556-78.336 c2.448-3.06-0.612-7.956-4.284-5.508c-36.108,25.704-33.048,80.784,8.568,98.532c11.016,4.896,26.928,3.06,41.616-1.836 c6.732,13.464,17.748,23.868,33.66,25.704c23.868,3.06,51.408-3.673,73.44-17.137c12.852,10.404,31.212,12.853,50.184,8.568 c80.172-15.912,65.484-113.832,42.228-171.972c6.12-0.612,11.629-0.612,17.748-0.612 C297.978,105.427,302.261,98.083,299.201,93.188z M83.166,240.067c-0.612-4.283-1.224-8.567-1.224-12.852 c0-6.732,1.224-13.464,3.06-19.584c4.284-14.688,29.988-9.792,22.032,9.792C102.138,226.603,92.958,234.559,83.166,240.067z M180.473,229.664c0-8.568,3.673-39.168,16.524-39.78c9.792-0.612,9.792,26.316,9.18,30.6c-2.447,11.629-11.016,21.42-21.42,28.765 C181.697,243.127,180.473,236.395,180.473,229.664z M252.077,43.615c8.568,15.912,17.748,31.212,26.928,46.512 c-12.852,1.836-25.704,4.284-37.943,7.344C246.569,80.947,249.018,61.975,252.077,43.615z"></path></g></svg></button></div><header class="header axil-header axil-header--page header-style-1 splash-header-style "><div class="axil-mainmenu "><div class="container"><div class="header-navbar"><div class="header-logo"><a href="/default.html"><img src="/assets/images/logo-light.png" alt="logo" width="150"/><img class="sticky-logo" src="/assets/images/logo-dark.png" alt="logo" width="100"/></a></div><div class="header-main-nav"><nav class="mainmenu-nav"><ul class="mainmenu"><li class="nav-item"><a class="nav-link active" href="/articles/page/1.html"><i class="fa fa-solid fa-quote-left"></i>文章</a></li><li class="nav-item"><a class="nav-link" href="/works.html"><i class="fa fa-solid fa-briefcase"></i>作品</a></li><li class="nav-item"><a class="nav-link" href="/products.html"><i class="fa fa-solid fa-code"></i>产品</a></li><li class="nav-item"><a class="nav-link" href="/about.html"><i class="fa fa-duotone fa-user"></i>关于</a></li><li class="nav-item"><a class="nav-link" href="/links.html"><i class="fa fa-solid fa-link"></i>友情链接</a></li></ul></nav></div><div class="header-action"><ul class="list-unstyled"><li class="mobile-menu-btn sidemenu-btn d-lg-none d-block"><button class="btn-wrap"><span></span><span></span><span></span></button></li></ul></div></div></div></div><div class="mobilemenu-popup"><div class="mobilemenu-inner"><div class="mobilemenu-header"><div class="mobile-nav-logo"><a href="/"><img src="/assets/images/logo-dark.png" alt="logo" width="100"/></a></div><button class="mobile-menu-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" width="10"><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"></path></svg></button></div><div class="mobilemenu-body"><nav class="mainmenu-nav"><ul class="mainmenu"><li class="nav-item"><a class="nav-link active" href="/articles/page/1.html"><i class="fa fa-solid fa-quote-left"></i>文章</a></li><li class="nav-item"><a class="nav-link" href="/works.html"><i class="fa fa-solid fa-briefcase"></i>作品</a></li><li class="nav-item"><a class="nav-link" href="/products.html"><i class="fa fa-solid fa-code"></i>产品</a></li><li class="nav-item"><a class="nav-link" href="/about.html"><i class="fa fa-duotone fa-user"></i>关于</a></li><li class="nav-item"><a class="nav-link" href="/links.html"><i class="fa fa-solid fa-link"></i>友情链接</a></li></ul></nav></div></div></div></header><div class="section call-to-action-area splash-call-to-action call-to-action-area--page"><ul class="list-unstyled shape-group-9"><li class="shape shape-1"><img src="/assets/images/others/bubble-12.png" alt="Comments"/></li><li class="shape shape-2"><img src="/assets/images/others/bubble-16.png" alt="Comments"/></li><li class="shape shape-3"><img src="/assets/images/others/bubble-13.png" alt="Comments"/></li><li class="shape shape-4"><img src="/assets/images/others/bubble-14.png" alt="Comments"/></li><li class="shape shape-5"><img src="/assets/images/others/bubble-16.png" alt="Comments"/></li><li class="shape shape-6"><img src="/assets/images/others/bubble-15.png" alt="Comments"/></li><li class="shape shape-7"><img src="/assets/images/others/bubble-16.png" alt="Comments"/></li></ul></div><nav id="onepagenav" class="service-scroll-nav navbar app-primary-nav app-primary-nav--page"><div class="container"><ul class="nav nav-pills"><li class="nav-item"><a class="nav-link current" href="/articles/page/1.html"><i class="fa fa-solid fa-quote-left"></i>文章</a></li><li class="nav-item"><a class="nav-link" href="/works.html"><i class="fa fa-solid fa-briefcase"></i>作品</a></li><li class="nav-item"><a class="nav-link" href="/products.html"><i class="fa fa-solid fa-code"></i>产品</a></li><li class="nav-item"><a class="nav-link" href="/about.html"><i class="fa fa-duotone fa-user"></i>关于</a></li><li class="nav-item"><a class="nav-link" href="/links.html"><i class="fa fa-solid fa-link"></i>友情链接</a></li></ul></div></nav><section class="section section-padding blog-post-content-show"><div class="container"><div class="row"><div class="blog-post__title"><div class="container"><div class="row"><div class="col-md-8 offset-md-2 col-sm-10 offset-sm-1 text-center"><h1 class="h2">理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始</h1><div class="blog-post__author">May<!-- --> <!-- -->13<!-- -->, <!-- -->2022<span><em>  by   </em></span><span class="h6">Chuckie Chang<!-- --> | 分类至:  <a title="开发趣味" href="/articles/sort/%e5%bc%80%e5%8f%91%e8%b6%a3%e5%91%b3/page/1.html"><span>开发趣味</span></a></span></div></div></div></div><div class="elementor-image-holder text-center"><img src="/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg" alt="理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始"/></div></div></div></div><div class="container type-blog-output"><div class="row"><div class="col-md-8 offset-md-2"><div><p>很久以前的前端，没有太多工具化工程化思想，一堆代码塞进去完事儿。如今前端已经很卷，卷到了一个开发环境都够你折腾一宿。那么我们抛开类似nextjs、create-react-app这类的工具或框架，我们该如何从零部署一个属于自己的开发环境呢？这篇文章将讲述如何配置一个基础的脚手架，支持React、TypeScrit和单元测试等必要的功能。在这个基础上，也能够很方便去个性化脚手架，让它支持比如Electron、Mobx、Redux、PM2、Express(可用来实现SSR服务端渲染)等你想要的扩展功能。</p>
<p>首先，我们要知道对于实际的项目，当然是效率优先，尽可能使用成熟的工具和框架，比如类似Next.js、UmiJS、Ant Design等能够简化UI Elements和脚手架环境的东西，都推荐使用它。他们能够一次性完成常用的UI架构，网站的SEO优化，服务端渲染，资源优化，性能优化(打包，懒加载等)，安全优化等。对于一个项目的快速搭建和稳定性是有比较明显的作用的。这里我们学会从零部署开发环境，一方面可以利于提升自己扩展脚手架的能力，同时也能够在未来的工具和框架运用中，更加灵活的加入自己的想法。</p>
<p>实质上，我们现在做的事情就是搭建一个比较基础的“<strong>微前端架构(Micro-Frontend Architectures)</strong>”，至于更加丰富的功能，可以在这个基础上不断丰富。目前某些大厂，都开源了自己的微前端架构工具，相当于也是把整个Web架构集于一体，极大提高了前后端分离、开发协作、部署测试发布迭代的整合效率，提高生产效率。萝卜各有所需，如果你的项目没有较多的约束性，可以直接使用现成的微前端架构工具，比如Bit、Piral、Modern.js等。当然如果不学习如何搭建自己的脚手架，一旦脱离了别人帮你写好的框架，你可能会显得很懵~</p>
<p>微前端架构其实可以很复杂，复杂到一整个大团队的协作，一个公司的业务体系，甚至不同语言开发者的分布式合作。也可以很简洁，简洁到让他成为自己的生产工具，可以用来开发，调试，可以用来部署发布，可以用来协作交流。这次写这篇文章，其实也是想抛开理论，去从某个角度去理解如何才算是自己的架构？它不一定非要打包发布，不一定非要变成一个系统的框架，微前端架构，其实和自己的生存环境，工作方式息息相关。它并不是一种标准，相当于是人定义的一种规范，一个体系。用得好了，事半功倍，用不好了，还是有不好的影响的：）</p>
<p>如果要真正搭建一个微前端架构，是非常复杂的，涉及的知识面很广，但是怎么去理解它的运作，从一个很小的方面去体验，就足够了。真正要使用微前端架构，还是建议引入比较成熟的架构方案，相对于中小型产品，自己瞎折腾下还是可以的。</p>
<p>本文分为两大部分，一个是基础配置，一个是深入配置，它将能够更好地适配你的React项目或者传统的Web项目(当然我觉得Vue也是同理的思想)。读完这篇文章，我们将实现一个由浅入深完成一套 <code>Webpack5+TypeScript+Jest+ESLint+SASS+React </code>的开发环境，也可以把它当做脚手架成品。</p>
<blockquote><p><strong>必须：</strong>在这之前，我们要确保你已经安装至少<strong>Node 10+</strong>以上的版本，我自己电脑目前的Node版本是<strong>v14.16.0</strong>。<br />
(假设你的项目名称叫 <code>my-react-app</code>, 那么 <code>my-react-app </code>文件夹内就包含以下的目录和文件，你可以通过 <code>cd /{your_directory}/my-react-app</code> 命令进入你的目录，使用 <strong>npm </strong>命令安装和移除依赖项，它也会同时修改 <code>package.json</code>和 <code>package-lock.json</code> 文件，具体怎么操作，相信你使用过Node的话，基本没有啥问题的)</p></blockquote>
<p>目录如下：</p>
<p><img class="alignnone wp-image-24272281 size-full" src="/static-remote/files/13d2346af377784f72099f77-matrixflipcomapiwpcontentuploadsdafffjpg.jpg" alt="" width="858" height="732" /></p>
<p><span style="color: #ff0000;">下面的步骤，尽可能按照顺序来：）</span></p>
<h3>（一）创建package.json文件</h3>
<p><strong>创建一个package.json文件，满足Webpack、TypeScript，Jest，ESLint等基本需求</strong>，同时它也满足基本的JS应用的需求。</p>
<p>Node 项目在项目根目录中名为 package.json 的文件中跟踪依赖关系和元数据。这是项目的核心。它包含名称、描述和版本之类的信息，以及运行、开发以及有选择地将项目发布到 npm 所需的信息。如果大家想要详细了解这个文件的用途，可以参看NPM的官方文档 <a href="https://docs.npmjs.com/creating-a-package-json-file" target="_blank" rel="noopener">https://docs.npmjs.com/creating-a-package-json-file</a></p>
<p>关于某些Dependencies，具体的功能根据自己的需求增加，目前我主要针对我们要配置的这个环境选择，多余的依赖就不参与。</p>
<p>下面是已经创建好的示例代码(并非最基础的package.json代码)，你可以根据需要修改它们。</p>
<pre>{
  "name": "my-react-app",
  "version": "0.0.1",
  "description": "My React App.",
  "main": "dist/my-react-app.js",
  "directories": {
    "test": "test"
  },
  "jest": {
    "testEnvironment": "jsdom",
    "transform": {
      "^.+\\.(js|jsx)$": "babel-jest",
      "^.+\\.(ts|tsx)?$": "ts-jest"
    }
  },
  "scripts": {
    "check": "tsc",
    "dev": "cross-env NODE_ENV=development webpack --progress --mode development --config build/config.js",
    "build": "cross-env NODE_ENV=production webpack --progress --mode production --config build/config.js",
    "test": "cross-env NODE_ENV=test jest"
  },
  "repository": {
    "type": "git",
    "url": "my-react-app"
  },
  "keywords": [
    "library"
  ],
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/xizon/my-react-app/issues"
  },
  "homepage": "https://github.com/xizon/my-react-app#readme",
  "devDependencies": {
    "@babel/core": "^7.13.14",
    "@babel/plugin-transform-runtime": "^7.16.4",
    "@babel/polyfill": "^7.0.0",
    "@babel/preset-env": "^7.2.0",
    "@babel/preset-typescript": "^7.1.0",
    "@types/jest": "^27.0.3",
    "@typescript-eslint/eslint-plugin": "^4.28.5",
    "@typescript-eslint/parser": "^4.28.5",
    "babel-loader": "^8.0.4",
    "babel-plugin-module-resolver": "^4.1.0",
    "cross-env": "^7.0.3",
    "eslint": "^7.32.0",
    "jest": "^27.0.4",
    "jsdom": "^18.1.1",
    "moment": "^2.29.1",
    "terser-webpack-plugin": "^5.1.4",
    "ts-jest": "^27.0.4",
    "ts-node": "^10.1.0",
    "typescript": "^4.3.5",
    "webpack": "^5.47.1",
    "webpack-cli": "^4.9.1"
  },
  "eslintConfig": {
    "parserOptions": {
      "parser": "@typescript-eslint/parser",
      "ecmaVersion": 2018,
      "sourceType": "module"
    },
    "extends": [
      "plugin:@typescript-eslint/recommended"
    ]
  },
  "dependencies": {},
  "author": "XXXXXXXXX"
}</pre>
<h3>（二）创建tsconfig.json文件</h3>
<p><strong><code>tsconfig.json</code> 文件用来配置TypeScript</strong>，具体的配置选项，请阅读官方文档 <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener">https://www.typescriptlang.org/docs/handbook/tsconfig-json.html</a>，下面是我自己的配置</p>
<pre>{
    "compilerOptions": {
      "target": "esnext",
      "lib": [
        "dom",
        "dom.iterable",
        "esnext"
      ],
      "allowJs": true,
      "skipLibCheck": true,
      "esModuleInterop": true,
      "allowSyntheticDefaultImports": true,
      "strict": true,
      "forceConsistentCasingInFileNames": true,
      "module": "commonjs",
      "moduleResolution": "node",
      "isolatedModules": true,
      "resolveJsonModule": true,
      "noEmit": true,
      "sourceMap": true,
      "declaration": true,
      "noUnusedLocals": false,
      "noUnusedParameters": false,
      "incremental": true,
      "noFallthroughCasesInSwitch": true,
      "noImplicitAny": false,
      "baseUrl": "./src"
    },
    "include": [
      "src/**/*.ts"
    ],
    "exclude": ["node_modules"]
}</pre>
<h3>（三）创建babel.config.js文件</h3>
<p><strong><code>babel.config.js</code> 文件主要用来配置babel</strong>，什么是babel，如何配置它的功能，请参看官方文档 <a href="https://babeljs.io/docs/en/config-files" target="_blank" rel="noopener">https://babeljs.io/docs/en/config-files</a></p>
<p>下面是我自己的配置代码：</p>
<pre>module.exports = {
  "presets": [

    [
      "@babel/preset-env",
      {
        "targets": {
          "node": "current"
        }
      }
    ],
    [
      "@babel/preset-typescript"
    ]
  ],
  "plugins": [
    ["@babel/plugin-transform-runtime",
      {
        "regenerator": true
      }
    ],
    ["module-resolver", {
      "root": ["./src"]
    }]

  ]
};</pre>
<h3>（四）创建build/config.js文件</h3>
<p>这个文件属于脚手架核心文件，项目的业务需求、开发功能、资源优化、性能、安全等都在这个文件中展示（你可以根据需要，使用多个build文件，这些脚手架文件将和package.json中的命令配置挂钩，让你能够运行它们）</p>
<blockquote><p><span style="color: #ff0000;">注意：path.resolve(__dirname, '../dist') 将返回：   /Applications/......./dist</span></p></blockquote>
<p>文件的参考代码如下（你可以自由扩展和改良它，如何改良，你可以参看Webpack的官网文档 <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener">https://webpack.js.org/concepts/</a> ，目前我们使用Webpack 5以上版本，经过自己的实践，它在性能上要高于4的版本）：</p>
<pre>'use strict';

const webpack = require('webpack');
const path = require('path');
const json = require('../package.json');
const moment = require('moment');
const TerserPlugin = require("terser-webpack-plugin");

/*! 
 *************************************
 *  Main configuration
 *************************************
 */
const devMode = process.env.NODE_ENV !== 'production';

const webpackConfig = {
	devtool: devMode ? 'source-map' : false,
    mode: devMode === 'development' ? 'development' : 'production',
	watch: true,
    resolve: {
		fallback: {
		    fs: false
		},
        extensions: ['.js', '.ts'],
    },
	
	entry: {
		'app': path.resolve(__dirname, '../src/index.ts'),
		'app.min': path.resolve(__dirname, '../src/index.ts')
	},
	output: {
	  library: {
		name: 'RootLib',
		type: 'var'
	  },
	  filename: '[name].js',
	  path: path.resolve(__dirname, '../dist'),
	},
	/*
	entry: path.resolve(__dirname, '../src/index.ts'),
	output: {
	  filename: 'app.js',
	  path: path.resolve(__dirname, '../dist'),
	},
	*/
	optimization: {
		minimize: true,
	    minimizer: [

			new TerserPlugin({
				test: /\.min\.js$/i
			}),
		],
		
	},
    module: {
        rules: [
            {
                test: /\.(js|ts)$/,
                loader: 'babel-loader',
                exclude: path.resolve( __dirname, 'node_modules' ),
                options: {  
				  'presets': [
					  '@babel/preset-env',
					  '@babel/preset-typescript'  
				  ]
                }
			},
        ],
		
    },
	plugins: []
	
	
};

// Add souce maps
webpackConfig.plugins.push(
	new webpack.SourceMapDevToolPlugin({
	  filename: '../dist/[file].map',
	})
);

// Adds a banner to the top of each generated chunk.
webpackConfig.plugins.push(
    new webpack.BannerPlugin(`
	My React App

	@source: https://github.com/xizon
	@version: ${json.version} (${moment().format( "MMMM D, YYYY" )})
	@license: MIT
	`)
);

									
/*! 
 *************************************
 *  Exporting webpack module
 *************************************
 */
module.exports = webpackConfig;</pre>
<blockquote><p>有些时候我们的项目会发布到npm，然后直接通过Node安装并调用。<br />
(1)注意：如果要使用npm发布的编译包，设置为下面的属性(如果导出的编译包不是为了使用import，则不要使用下面的配置，否则浏览器会报错)：</p>
<pre class="codePre brush: javascript;">	output: {
		library: {
			type: 'commonjs'
		},
	},</pre>
<p>直接使用&lt;script src="global.js" &gt;&lt;/script&gt; 也会报错<br />
<span style="color: #ff0000;"> Uncaught ReferenceError: exports is not defined</span></p>
<p>正确的用法：</p>
<pre class="codePre brush: javascript;">&lt;script&gt;const exports = {"__esModule": true};&lt;/script&gt;
&lt;script src="global.js"&gt;&lt;/script&gt;
</pre>
<p>(2)并且导出的变量或者函数需要包含 {},如</p>
<pre>import __ from './global';
export default __;
export { __ };</pre>
<p>(3)使用可以减小编译后的js体积</p>
<pre>["@babel/preset-env", { 
        "targets": {"esmodules": true}
}],</pre>
</blockquote>
<p><strong>至此，一个基础的Webpack5+TypeScript+Jest+ESLint的基础开发环境就已经完成了，接下去，我们还将深入配置React的环境。</strong></p>
<h3>（五）深入搭建React环境</h3>
<p>我们只是完成了基础的功能支持，如果我们需要使用React，那么我们还将进一步配置脚手架。当然，Vue支持也同理。在这个过程中，某些依赖会产生冲突，或者因为TypeScript的某些配置，会造成编译错误，所以我们需要一些测试和检查，就能发现这些错误，并修正一些配置。</p>
<p>这些代码都是我经过测试后的基础参考示例代码（大部分已经修正了编译错误），出现JS代码编译错误不要紧，我们只要根据终端的报错，来找出原因，修正脚手架的配置即可。当然，如果是为了方便，你也可以直接使用React官方提供的 <code>create-react-app</code> 来编写你的应用程序，某些个性化的需求也需要参考文档增加。如果你的项目个性化需求比较多，可以直接创造自己的脚手架，方便混合其它第三方库和工具。不依赖与第三方的架构。</p>
<p>接下去我们继续配置React的支持。</p>
<h4 style="margin-bottom: 1.13043em; line-height: 1.41304em;">第1步: 安装React相关的依赖项</h4>
<blockquote><p>后面的步骤，如果需要使用npm命令安装新的依赖，同理进入目录</p></blockquote>
<p>先进入你的项目的目录</p>
<pre>cd /{your_directory}/my-react-app</pre>
<p>然后运行命令：</p>
<pre>sudo npm install</pre>
<p>补全TypeScript对于React接口的支持，安装：</p>
<pre>npm install @types/react --save-dev</pre>
<p>安装完基本的依赖，然后安装react的依赖（这几个依赖有什么作用，可以自己去搜索引擎查询一下，一般是我项目里常用的一些依赖项）和继续配置（react入口文件也可以是ts文件）</p>
<pre>npm install axios react react-dom react-router-config@5.1.1 react-router-dom@5.2.0
npm install @babel/preset-react @babel/plugin-proposal-class-properties --save-dev</pre>
<p>安装新的依赖后，<code>package.json</code> 文件会自动修改。</p>
<h4>第2步: 修改build/config.js</h4>
<p>为了适配React，我们需要修改webpack配置文件 <code>build/config.js</code>，修改后的代码如下（<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）：</p>
<pre>   context: __dirname, // to automatically find tsconfig.json
    resolve: {
        extensions: ['.js', '.jsx', '.ts', '.tsx', '.scss', '.sass'],
        alias: {
            // specific mappings.
            // Supports directories and custom aliases for specific files when the express server is running, 
             // you need to configure the following files at the same time:
             // 1) `babel.config.js`    --&gt; "plugins": [["module-resolver", {"alias": {...}} ]]
             //  2) `tsconfig.json`      --&gt; "compilerOptions": { "paths": {...} }
             //  3) `package.json`       --&gt; "jest": { "moduleNameMapper": {...} }
             '@': path.resolve(__dirname, '../src')
        }
    },
	
	entry: {
		'app': path.resolve(__dirname, '../src/index.js'),
		'app.min': path.resolve(__dirname, '../src/index.js')
	},

module: {
    rules: [
        {
            test: /\.(js|jsx|ts|tsx)$/,
            loader: 'babel-loader',
            exclude: path.resolve(__dirname, '../node_modules' ),
            options: {  
              'presets': [
                  '@babel/preset-env',
                  '@babel/preset-react',
                  '@babel/preset-typescript',
                    {
                      plugins: [
                        '@babel/plugin-proposal-class-properties'
                      ]
                    }	  
              ]
            }
        },
    ],
    
},</pre>
<p>Babel的一些插件有什么作用，可以直接去官网多看看文档即可。这里主要说一下 <code>@babel/plugin-proposal-class-properties</code> 插件,主要是用来编译的，可以解决一些静态类属性编译的问题。</p>
<h4>第3步: 安装SASS开发依赖</h4>
<p>不论我们使用css-in-js还是外部引用CSS样式文件，我们都需要配置SASS插件，让其能够编译SASS,SCSS文件，我个人比较喜欢使用SCSS文件，单独外部引用，而不是直接css-in-js, 这样便于我自己维护样式表。</p>
<p>运行命令</p>
<pre>npm install sass-loader node-sass style-loader css-loader mini-css-extract-plugin@2.4.5 css-minimizer-webpack-plugin --save-dev</pre>
<p><span style="color: #ff0000;">【注意】node-sass(7.0.1)和sass-loader(12.4.0)的版本搭配，无需file-loader就可以提取文件。会和file-loader冲突，提取的文件可能无法使用，需要移除file-loader相关配置或者降级到node-sass(4.14.1)和sass-loader(7.1.0)才可搭配file-loader使用</span></p>
<p>安装关联jest单元测试的一个依赖</p>
<pre>npm install identity-obj-proxy --save-dev</pre>
<p><code>identity-obj-proxy</code> 插件使用ES6代理的身份对象， 对模拟CSS模块之类的webpack导入很有用，它可以解决编译时导入CSS的一些错误</p>
<p>下面的配置适用于node-sass7.x.x, sass-loader 12.x.x 版本<br />
mini-css-extract-plugin2.5.0版本有bug无法运行<br />
适配CSS文件，修改webpack文件 <code>build/config.js</code> （<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）</p>
<pre>const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const CssMinimizerPlugin = require("css-minimizer-webpack-plugin");


optimization: {
    minimizer: [
        new MiniCssExtractPlugin({
            // Options similar to the same options in webpackOptions.output
            // both options are optional
            filename: '../dist/[name].css'
        }),
        new CssMinimizerPlugin({
            test:/\.min\.css$/i,
            parallel: true,
            minimizerOptions: {
                preset: [
                    "default",
                    {
                        discardComments: { removeAll: true },
                    },
                ],
            },
        }),

    ],
},
module: {
    rules: [
        {
            test: /\.(sa|sc|c)ss$/,
            include: [
                path.resolve(__dirname, '../src'),
                // Prevent errors in calling the node library: Module parse failed: Unexpected character'@'
                path.resolve(__dirname, '../node_modules'),
            ],
            use: [
	   /**
	  * Note:
	   * You can use `style-loader` to inject CSS into the DOM to generate a final js file
	  */
                {
                    loader: MiniCssExtractPlugin.loader, //Extracts CSS into separate files  ( Step 3 )
                    options: {
                        // you can specify a publicPath here
                        // by default it use publicPath in webpackOptions.output
                          publicPath: '../dist/'

                    }
                },

                {
                    loader: "css-loader",  // interprets @import and url() and will resolve them. ( Step 2 )
                    options: {
                        sourceMap: true
                    }
                },
                {
                    loader: 'sass-loader', // compiles Sass to CSS ( Step 1 )
                    options: {
                        sourceMap: true,
		     sassOptions: {
			  /* (nested | expanded | compact | compressed) */
			  outputStyle: 'expanded'
		     },
                    }

                },
            ]
        },
    ],
},</pre>
<p><strong>提示：</strong>如果不单独引用生成的 <code>dist/*.css</code> 文件，使用js内置的css，删除 <code>mini-css-extract-plugin</code> 和 <code>css-minimizer-webpack-plugin</code> 相关的配置，然后将样式loader修改为下面的代码（<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）：</p>
<pre>{
    test: /\.(sa|sc|c)ss$/,
    include: [
        path.resolve(__dirname, '../src'),
        // Prevent errors in calling the node library: Module parse failed: Unexpected character'@'
        path.resolve(__dirname, '../node_modules'),
    ],
    use: [
        {
            loader: "style-loader"  // creates style nodes from JS strings ( Step 3 )
        },
        {
            loader: "css-loader",   // interprets @import and url() and will resolve them. 
                                    //(translates CSS into CommonJS) ( Step 2 )
            options: {
                sourceMap: true
            }
        },
        {
            loader: 'sass-loader', // compiles Sass to CSS ( Step 1 )
            options: {
                sourceMap: true,
                sassOptions: {
                    /* (nested | expanded | compact | compressed) */
                    outputStyle: 'expanded'
                },

            }

        },
    ]
},</pre>
<h4>第4步: 继续安装引用文件的开发依赖</h4>
<p>执行命令：</p>
<pre>npm install raw-loader glslify-loader json-loader file-loader  --save-dev</pre>
<blockquote><p><strong>注意(1)：</strong>path.resolve(__dirname, '../dist') 将返回：   /Applications/......./dist</p>
<p><strong>注意(2)：</strong><code>mini-css-extract-plugin</code> 的 <code>publicPath</code> 设置会让 <code>file-loader</code> 的 <code>publicPath</code> 路径失效，导致文件重复提取，可以删除 <code>file-loader</code> 插件的相关配置（不删除此配置会导致生成图片解析错误）来解决</p></blockquote>
<p>适配引用的字体，图片等文件，修改webpack文件<code>build/config.js </code>（<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）</p>
<pre>module: {
    rules: [
        {
            test: /\.(glsl|vs|fs|vert|frag)$/,
            exclude: path.resolve(__dirname, '../node_modules' ),
            use: [
                'raw-loader',
                'glslify-loader'
            ]
        },
        {
            test: /\.json$/,
            use: 'json-loader'
        },
        
      // Note:
      // 1) Compatible with node-sass(4+) and sass-loader(7+)
      // 2) The versions of node-sass (7+) and sass-loader (12+) are matched to extract files without `file-loader`
        {
             test: /\.(png|jpe?g|gif|ttf|eot|svg|woff(2)?)(\?[a-z0-9=&amp;.]+)?$/,
            loader: 'file-loader', 
            options: {
              esModule: false, //change the css path via output
		name (file) {
		    return '[name]_[hash].[ext]'
		},
              outputPath: (url, resourcePath, context) =&gt; { //the files from `./src/...` will copy to `./dist/`
                  
                 //original name: path.basename(resourcePath)
                 
                 //fonts
                 if ( resourcePath.indexOf( 'webfonts/' ) &gt;= 0 || resourcePath.indexOf( 'fonts/' ) &gt;= 0 ) {
                     return '../dist/fonts/' + url;
                 }
                  
                 //imags
                 if ( resourcePath.indexOf( 'images/' ) &gt;= 0 || resourcePath.indexOf( 'img/' ) &gt;= 0 ) {
                     return '../dist/mages/' + url;
                 } 
                  
                     
                 return '../dist/misc/' + url;
                
              },
              publicPath: (url, resourcePath, context) =&gt; { //the css path of output 
                 
                // If the file is in the root directory, you can leave it empty. If in another directory, 
                // you can write: "/blog". (but no trailing slash)
                const websiteRootDir = '';


                 //fonts
                 if ( resourcePath.indexOf( 'webfonts/' ) &gt;= 0 || resourcePath.indexOf( 'fonts/' ) &gt;= 0 ) {
                     return `${websiteRootDir}/dist/fonts/${url}`;
                 }
                
                 //imags
                 if ( resourcePath.indexOf( 'images/' ) &gt;= 0 || resourcePath.indexOf( 'img/' ) &gt;= 0 ) {
                     return `${websiteRootDir}/dist/images/${url}`;
                 } 
                  
                     
                 return `${websiteRootDir}/dist/misc/${url}`;
                  
                
              }
            }
        }

    ],
},</pre>
<h4>第5步: 继续安装webpack本地开发服务器开发依赖</h4>
<p>运行命令</p>
<pre>npm install webpack-dev-server  --save-dev</pre>
<p>适配4.x.x以上版本的本地服务，修改webpack文件<code>build/config.js</code> （<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）</p>
<blockquote><p>设置 <code>static</code> 参数后，<code>public/index.html</code> 内的文件路径可以写成如：<code>../dist/app.min.css</code>, 使用 <code>localhost:8080/public/index.html</code> 访问，不设置此参数，则会自动定位到 <code>public</code> 和 <code>dist</code> 文件夹。可以直接使用 <code>localhost:8080</code> 访问</p></blockquote>
<p>代码如下：</p>
<pre>const WebpackDevServer = require('webpack-dev-server');

/*! 
 *************************************
 *  Listen the server
 *************************************
 */

const server = new WebpackDevServer(compiler, {
	 // After setting the static parameter, the file path in `public/index.html` can be written as: `../dist/app.min.css`
	 static: path.resolve(__dirname, '../' ),
	 hot: true,
	 // Disables a full-screen overlay in the browser when there are compiler errors or warnings.
	 client: {
		 overlay: {
			 warnings: false,
			 errors: true
		 }
	 },

});

server.listen(8080, "localhost", function (err, result) {
	if (err) {
		return console.log(err);
	}

	console.log( 'Listening at http://localhost:8080/');
})
</pre>
<h4>第6步: 修改package.json文件的eslintConfig和jest部分</h4>
<p>修改后的代码如下（<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）</p>
<pre>  "jest": {
    "moduleNameMapper": {
      "\\.(css|less|scss|sass)$": "identity-obj-proxy",
      "^@/(.*)": "/src/$1"
    },
  },
 "eslintConfig": {
    "parserOptions": {
      "parser": "@typescript-eslint/parser",
      "ecmaVersion": 2018,
      "sourceType": "module",
      "ecmaFeatures": {
        "jsx": true
      }
    },
    "extends": [
      "plugin:react/recommended",
      "plugin:@typescript-eslint/recommended"
    ],
    "rules": {},
    "settings": {
      "react": {
        "version": "detect"
      }
    }
  },</pre>
<p>别名如果指定更多，<code>package.json</code> 文件的 <code>eslintConfig</code> 和 <code>jest</code> 部分可以写成：</p>
<pre>...
  "jest": {
    "testEnvironment": "jsdom",
    "moduleNameMapper": {
      "\\.(css|less|scss|sass)$": "identity-obj-proxy",
      "^@app.react/config/(.*)": "/src/config/$1",
      "^@app.react/components/(.*)": "/src/client/components/$1",
      "^@app.react/router/(.*)": "/src/client/router/$1",
      "^@app.react/helpers/(.*)": "/src/client/helpers/$1",
      "^@app.react/services/(.*)": "/src/client/services/$1",
      "^@app.react/reducers/(.*)": "/src/client/reducers/$1",
      "^@app.react/pages/(.*)": "/src/client/views/_pages/$1",
      "^@app.react/actions/(.*)": "/src/client/actions/$1",
      "^@app.react/server/(.*)": "/src/server/$1",
      "^@app.react/store/(.*)": "/src/store/$1"
    },
    "transform": {
      "^.+\\.(js|jsx)$": "babel-jest",
      "^.+\\.(ts|tsx)?$": "ts-jest"
    }
  },
…
</pre>
<h4>第7步: 修改tsconfig.json文件</h4>
<p><span style="color: #ff0000;">特别注意：<code>baseUrl</code>, <code>"@/*": ["*"]</code> 和 <code>include</code>，这几个连带的设置不能出错。</span></p>
<p>参考代码如下（<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）</p>
<pre>{
    "compilerOptions": {
      "jsx": "react",
     "baseUrl": "./src",
      "paths": {
        "@/*": ["*"]
        }
    },
    "include": [
      "src/**/*.ts", "src/**/*.tsx"
    ],
}</pre>
<p>别名如果指定更多，<code>tsconfig.json</code> 可以写成：</p>
<pre>...
      "baseUrl": "./src",
      "paths": {
        "@app.react/config/*": ["config/*"],
        "@app.react/components/*": ["client/components/*"],
        "@app.react/router/*": ["client/router/*"],
        "@app.react/helpers/*": ["client/helpers/*"],
        "@app.react/services/*": ["client/services/*"],
        "@app.react/reducers/*": ["client/reducers/*"],
        "@app.react/pages/*": ["client/views/_pages/*"],
        "@app.react/actions/*": ["client/actions/*"],
        "@app.react/server/*": ["server/*"],
        "@app.react/store/*": ["store/*"]
      }
    },
…</pre>
<h4>第8步: 修改babel.config.js文件</h4>
<p>参考代码如下（<span style="background-color: #ffff00;">自己可以对比之前的基础代码</span>）</p>
<pre>module.exports = {
  "presets": [
    [
      "@babel/preset-react"
    ],
  ],
  "plugins": [
    [
      "@babel/plugin-proposal-class-properties"
    ],
    ["module-resolver", {
      "root": ["./src"],
      "alias": {
        "@/": "./src"
      }
    }]

  ]
};</pre>
<p>别名如果指定更多，<code>babel.config.js</code> 可以写成：</p>
<pre>...
    ["module-resolver", {
      "root": ["./src"],
      "alias": {
        "@app.react/config": "./src/config",
        "@app.react/components": "./src/client/components",
        "@app.react/router": "./src/client/router",
        "@app.react/helpers": "./src/client/helpers",
        "@app.react/services": "./src/client/services",
        "@app.react/reducers": "./src/client/reducers",
        "@app.react/pages": "./src/client/views/_pages",
        "@app.react/actions": "./src/client/actions",
        "@app.react/server": "./src/server",
        "@app.react/store": "./src/store"
      }
    }]
 
…
</pre>
<h4>第9步: 修改webpack的externals属性【可选】</h4>
<p>根据需要修改webpack的排除文件夹，方便创建npm包发布的编译文件。<code>externals</code> 属性防止将某些 import 的包(package)打包到 bundle 中,而是在运行时(runtime)再去从外部获取这些扩展依赖(external dependencies)。参考代码如下：</p>
<pre>	//Exclude react from bundle
	externals: [
		{
			// String
			'react': 'React',
			'react-dom': 'ReactDOM',
		},
		// Function
		function ({ context, request }, callback) {

			// Use the same './_all' path to prohibit loading of general style sheets
			if ( request.indexOf( '@/components/_utils/styles' ) &gt;= 0 ) {
				return callback(null, 'commonjs ' + './_all');
			}

			if ( request.indexOf( '@/components/_utils/_all' ) &gt;= 0 ) {
				return callback(null, 'commonjs ' + './_all');
			}	
			callback();
		},
		// Regex
		/^(jquery|\$)$/i,
	],
</pre>
<h4>第10步: 根据需要定义webpack的插件【可选】</h4>
<p>下面的例子定义了一个编译完成后的插件，遍历目录并且移动删除。</p>
<pre>/*! 
 *************************************
 *  Run command after webpack build
 *************************************
 */
 const glob = require('glob');
 const fs = require('fs');
 
 
 const packagesRoot = glob.sync( path.resolve(__dirname, '../packages/*/*.ts') );
 const packagesSub = glob.sync( path.resolve(__dirname, '../packages/*.ts') );
 const packages = packagesRoot.concat( packagesSub );
 const componentsEntry = {};
 packages.map( ( path ) =&gt; {
     const filename = path.split( '/' ).pop().replace('.ts', '');
     componentsEntry[ filename ] = path;
 });
 
 console.log( 'componentsEntry: ', componentsEntry );

 class MyPluginCompiledFunction {
	// Define `apply` as its prototype method which is supplied with compiler as its argument
	apply(compiler) {
		// Specify the event hook to attach to
		compiler.hooks.done.tap('MyPluginCompiledFunction', (compilation) =&gt; {

			//Move the components to folders of root directory
			const comNames = Object.keys( componentsEntry );
			packages.map( ( comPath, index ) =&gt; {
				
				const newDir = path.resolve(__dirname, `../${comNames[index]}`);
				const oldPath = path.resolve(__dirname, `../dist/cjs/${comNames[index]}.js`);
				const newPath = `${newDir}/index.js`;
				
				if (!fs.existsSync(newDir)){
					fs.mkdirSync(newDir);
				}

				fs.rename(oldPath, newPath, function (err) {
				  if (err) throw err
				  console.log(`Successfully ${comNames[index]}.js moved!`);
				});

			});

			//remove old folder
			// Where the recursive option deletes the entire directory recursively.
			fs.rmdirSync(path.resolve(__dirname, '../dist/cjs'), { recursive: true });
			
		});
	}
}
  

/*! 
 *************************************
 *  Main configuration
 *************************************
 */
 module.export = {
    ...
	plugins: [ new MyPluginCompiledFunction() ]
};</pre>
<h4>第11步: 根据需要定义Node脚本【可选】</h4>
<p>脚本可以单独分离出来，抛弃webpack，直接执行，使用node来执行JS文件即可修改 <code>package.json</code> 文件：</p>
<pre>  "scripts": {
    "clear": "node xxx.js"
  }</pre>
<h3>（六）使用webpack内置生成HTML功能</h3>
<p>如果创建Electron应用，需要单独调用生成的js，所以内置生成HTML的功能暂时不使用。这里做一个配置参考。</p>
<p>您可以手动创建 <code>public/index.html</code> 来加载 <code>dist</code> 里生成的 <code>app.min.css</code> 和 <code>app.min.js</code>，8080端口将默认运行 <code>public</code> 里的<code>index.html</code>,它将自动定位到dist的文件，所以无需增加dist的二级目录。直接写 <code>app.min.css</code> 和 <code>app.min.js</code> 即可</p>
<p>（<code>webpack-dev-server</code> 设置 <code>static</code>参数后，<code>public/index.html</code> 内的文件路径可以写成如：<code>../dist/app.min.css</code>, 使用 <code>localhost:8080/public/index.html</code> 访问）</p>
<p>到目前为止，我们都是在 index.html 文件中手动引入所有资源，然而随着应用程序增长，并且一旦开始 在文件名中使用 hash 并输出 多个 bundle，如果继续手动管理 index.html 文件，就会变得困难起来。然而，通过一些插件可以使这个过程更容易管控。</p>
<p>我们使用webpack的HTML生成功能直接打包生成，并且导入资源。参看：</p>
<p><a href="https://webpack.docschina.org/guides/asset-management/" target="_blank" rel="noopener">https://webpack.docschina.org/guides/asset-management/</a><br />
<a href="https://webpack.docschina.org/guides/output-management/" target="_blank" rel="noopener">https://webpack.docschina.org/guides/output-management/</a></p>
<p>使用内置的<a href="https://webpack.docschina.org/guides/asset-modules/" target="_blank" rel="noopener">Asset Modules</a>来导入图片文件等，使用 <code>HtmlWebpackPlugin</code> 插件来生成HTML文件</p>
<h3 style="line-height: 1.42188em;">（七）结语</h3>
<p>好了，我们已经完成了从基础到深入的基础脚手架搭建，属于自己的一个微前端架构算是完成了一个雏形，以其说是雏形，也可以说其实可以直接用于部分适合需求的项目。你也可以再次基础上增加更多的配置，比如PM2的支持，Express的支持，资源压缩优化等等功能。</p>
<p>都到这里了，接下去，我们要做一个项目，我们可以使用自己的脚手架，也可以大胆的使用诸如nextjs或者create-react-app这类的工具了，底气足了，学习起来是不是更有干劲了？如果文章对你有帮助，也可以持续关注我，不定期更新一个小技巧。</p>
</div><p>本文出自<a class="simple-btn" href="https://www.c945.com/article/b214e53f0c655e422783718d.html">没位道 - Chuckie Chang个人网站</a>，转载请保留出处，谢谢！<br/>文章采用<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC-BY-4.0"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IB2cksfwAAAf5QTFRF////////////////8fHx7+/v6Ofn4+Pj4N/g39/f1tXV09bS0tXS0tXR0dTR0dTQ0NTQ0NPPz9PPztLOztHNzdHNzdHMz8/PzdDMzNDMzNDLzM/Ly8/Ly8/Ky87Kys3Jyc3Jyc3Iy8rLyMzIyMzHx8vHxsrGycjIxsrFxcnFyMfHxcnExMnExMjDw8jDxMfDw8fCwsfCwcXAwMXAwMW/wMS/v8S+v8O+vsO+vsK9vcK9vcK8v7+/vMG8vMG7vMC8u8C7u8C6ur+6ur+5ub65ub64uL23t7y2urm5tru1tbq0tLqztLmzs7iysrixtbW1srexsbewsLavsLWvr7Wur7SusLOvrrStrrOtr7KvrbOsrLKrr6+vq7GqrKurpqqmo6ijoqaho6Ghn6OenqCdn5+fnp2dn5aampiZlpmWlZmUmJaXk5iTkZSRkZORkY+Pj4+PiYyJjIqLjoeLh4aHhIaEhIWEgoWChIGCf4F+gICAfX98fH98fnt8en15eXx5eHV2dnN0dXJzcHJvcHBwbmxsaGVmY19hYGBgXV5dWldYUFFQUFBQQ0RDQEBAPj8+Pzs8Pzc5NTY1MjMxMjExMDAwMS0uLS0tKioqKSopKSkpKCkoKCgoKicnKCUmJCQkIx8gICAgHxscGxsbGRkZEBAQDg4ODQ4NDQwNAAAA4LK4NQAAAAN0Uk5TAAoO5yEBUwAAA+1JREFUeNq1lot3GkUUxlcviEDS7bYbKxC2oaWKSUmRpkkrSBvzIMGkJjGamoSobROtNqRVWyOppli0NBBSHxst+JiYUvr9l57dheVx8ESpncOeOfvbnW92vjv3DtyzeCqN44BIeCh02t/tcXdIDpvN4Tzs9nj9faHBcGR88u2Z2dm56H9vAIdIeCBwyudxOUWBb7FaW/YJYrvL4+sJDCjK0zOzc00pcwgPBE56j0kif3OzqCyiuHmDP+h0H/e/NhCOnJ+avjA7t55THuTWK+P2JOAwFDjpdduF2G7FoN1lwebq8gcGw2MTUzOf5IFsMpkF8le1UVf3JuAQOuV12/g0gEIqHgzGUwUA6RMvuI73hIZGxyc/fISMmYjInMEjddSlf0HA4bTvmF3RLcSNpLXFApA/YXP7+vqHIxM5pIgIUB4grwzKq2Rlo46YOjtNOgEHv0cS0oBsJr0ZZSAtOD3+wNDoGjKWsjBlsB6NruPnj4lWHj5OmHSSsdBFxhgbKRFFuPuoGANkI1Gt8vJBl7e3P/wAVTOakYtGc/iD3f8e8S+woBMzdbIf7iYYW9GIIuxx8rsoHKKaZixgl2/3+F8fQla5T0FdPmURjSL77W3GWMJkqRAyfMQ+J1pi2xpRhN1tN4E41bVF4Ibo9p0ZQJJUJzQvkopMkqgzASBhqRDDn+w3IhNjz6lEEe44sImCkSiYyWbjWneNiArYFA57e/sbCxOZEtuMbYzo5K1fgqrw87qwxBeVZQbVHZydV7uUsvjiPmdXz7lGVhCRYYksSrTul8nIxZeJFhirWOFoBa4RydgxB3cWZcjm+Z1F1YsWh8cf+lULnvbBeqhog21vI7Hw9V9lssTY6urv7NNK8OxWIKiMjGsCJbuDgNX2kj/0FTJUv90yRKbVh49XDNVkVVnAd4bKdttDePhBJUGS1Qny2UYdObKwYNFJjRXGQztxGbLSVawYfr/ZlC4FrxQ1PXhJFHmpq+fc8Jsf5AA5lZQrJedSfk+ibrc0CqRvt/ms2tEONoUOb+8b4bHJd75pqmy622KqF40S5NUzg6PjUzNNHCLg8Iqa0uZ/SunI+WaFu4+KlxsVoZjo6u7rD49NTF+Ya0oYtyThHiBXlSGzWjalL5/omAZwx7G/utAb4wXgR95+C08qjDXb/nt1RxP/4hX9HS0/oF0a0S4i1L1EtcJYcwiXqw/TmGC/UjWm9KMqldJ9zVQ1QBPGHUnkY+Xjf5kXpWofymWzeiqqmag8F1G9MH56z9l2gG+1Wlt5QWx/d6tmTJ0RZRuohtUtgdP51vWzksNud0hnr2/VxqHRF9d7XI5DA+H/+1/hM09J92+7pmyRGJsTpgAAAABJRU5ErkJggg==" alt="CC-BY-4.0"/> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p></div></div></div></section><section><div class="container"><div class="row"><div class="col-md-8 offset-md-2"><div class="blog-tags"><h6>关键词: </h6><a href="/articles/tag/index.html?page=1&amp;s=jest">jest</a><a href="/articles/tag/index.html?page=1&amp;s=react">react</a><a href="/articles/tag/index.html?page=1&amp;s=sass">sass</a><a href="/articles/tag/index.html?page=1&amp;s=typescript">typescript</a><a href="/articles/tag/index.html?page=1&amp;s=webpack">webpack</a><a href="/articles/tag/index.html?page=1&amp;s=%E5%89%8D%E7%AB%AF">前端</a><a href="/articles/tag/index.html?page=1&amp;s=%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91">前端开发</a><a href="/articles/tag/index.html?page=1&amp;s=%E5%BE%AE%E5%89%8D%E7%AB%AF">微前端</a></div></div></div></div></section><section><div class="container"><div class="row"><div class="col-md-8 offset-md-2"><div class="row justify-content-between pb-5"><div class="col text-start"><a class="simple-btn" href="/article/performance-and-security-optimization-guide-for-centos8-lemp-environment-2022.html"><i class="fas fa-long-arrow-alt-left"></i>  上一篇</a></div><div class="col text-end"><a class="simple-btn" href="/article/the-confusion-of-the-front-end-framework.html">下一篇 <i class="fas fa-long-arrow-alt-right"></i></a></div></div><hr/><div class="text-center p-3"><a class="axil-btn btn-fill-primary" href="/article/[id]"><span>返回列表</span></a>  <a class="axil-btn btn-fill-secondary" data-title="理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始" data-url="https://www.c945.com/article/b214e53f0c655e422783718d.html" data-pic="https://www.c945.com/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg" href="#" data-modal-width="600px" data-modal-height="300px"><svg viewBox="0 0 448 512"><path fill="#0d6efd" d="M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"></path></svg>分享</a><div class="styles_app-share-modal-box__9M8_R"><a href="#" class="styles_app-share-modal-box__close__gDukx"><svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="0 0 320 512"><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"></path></svg></a><div class="styles_app-share-modal-box__content__7Z_58"><div><div class="styles_app-share__wrapper__xvEL0"><h3>分享给朋友!</h3><div><span data-network="true" data-title="理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始" data-url="https://www.c945.com/article/b214e53f0c655e422783718d.html" data-pic="https://www.c945.com/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg" data-href="https://tool.oschina.net/action/qrcode/generate?data={u}&amp;output=image%2Fgif&amp;error=L&amp;type=0&amp;margin=0&amp;size=4&amp;1578559516540"><svg xmlns="http://www.w3.org/2000/svg" width="50" viewBox="0 0 576 512"><path fill="#0c7f3a" d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154zm-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4zm-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2zM563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4zm-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6zm107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6z"></path></svg></span><em>微信</em></div><div><span data-network="true" data-title="理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始" data-url="https://www.c945.com/article/b214e53f0c655e422783718d.html" data-pic="https://www.c945.com/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg" data-href="http://service.weibo.com/share/share.php?title={t}&amp;url={u}&amp;pic={p}"><svg xmlns="http://www.w3.org/2000/svg" width="50" viewBox="0 0 576 512"><path fill="#d90909" d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"></path></svg></span><em>微博</em></div></div></div></div></div></div></div></div></div></section><section class="pb--80 pb_lg--40 pb_md--20"><div class="container"><div class="row"><div class="col-md-8 offset-md-2"><div class="blog-comment-form"><h5>文章评论</h5><hr/><div id="app-remotecomment__comments"></div><div class="app-remotecomment__form"><form id="app-remotecomment-site"><div class="row"><div class="col-lg-6"><div class="form-group"><label>标题 (必填)</label><input type="text" name="title" id="title" class="form-control"/></div></div><div class="col-lg-6"><div class="form-group"><label>电子邮箱 (必填，不公开)</label><input type="email" name="email" id="email" class="form-control"/></div></div><div class="col-lg-12"><div class="form-group"><label>网址</label><input type="url" name="url" id="url" class="form-control" placeholder="https://"/></div></div><div class="col-lg-12"><div class="form-group mb--30"><label>内容</label><textarea id="content" name="content" class="form-control textarea" cols="30" rows="4"></textarea></div></div><div class="col-lg-4 app-remotecomment-captcha-section"><div class="form-group"><label>验证码</label><input type="text" id="captcha" name="captcha" class="form-control"/></div></div><div class="col-lg-8 app-remotecomment-captcha-section"><div class="form-group"><label> </label><div class="captcha-wrapper"><span id="uix-usercenter-refresh-session-captcha"></span></div></div></div><div class="col-lg-5"><div class="form-group"><button type="submit" class="axil-btn btn-fill-primary btn-fluid" name="submit-btn">提交</button></div><p class="status"></p></div></div><input type="hidden" name="toid" id="toid" value="5754101545148509810"/><input type="hidden" name="refer" id="refer" value="https://www.c945.com/article/b214e53f0c655e422783718d.html"/><input type="hidden" name="app-remotecomment-site-security" id="app-remotecomment-site-security"/></form></div></div></div></div></div></section><section class="section section-padding-2 bg-color-dark pb--80 pb_lg--40"><div class="container"><div class="row"><div class="col-md-8 offset-md-2 footer-menu-link footer-menu-link--list"><h5 class="title-white">相关文章推荐</h5><ul></ul></div></div></div></section><footer class="footer-area splash-footer splash-footer--page"><div class="container"><div class="footer-bottom"><div class="row align-items-center"><div class="col-md-12 text-center"><div class="footer-copyright"><p class="copyright-text">&copy; 2010-2023 <a href="/">没位道</a> All Rights Reserved. 本站基于JAMstack技术构建<br />若未特别说明，本站所有内容均遵循<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC-BY-4.0">CC-BY-4.0 国际许可协议</a></p><script id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>
                            if (typeof(LA) !== 'undefined') LA.init({id: "JdyfUJi3RdCZVi9F",ck: "JdyfUJi3RdCZVi9F"});
                        </script></div></div></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"currentData":{"ID":24272280,"author":"1","author_nickname":"wpuser","author_display_name":"Chuckie Chang","author_url":"https://matrixflip.com/api","author_username":"wpuser","author_avatar":"https://secure.gravatar.com/avatar/?s=96\u0026d=mm\u0026r=g","categories":[87],"categories_output":[{"ID":87,"slug":"%e5%bc%80%e5%8f%91%e8%b6%a3%e5%91%b3","name":"开发趣味","term_taxonomy_id":87,"term_group":0,"taxonomy":"category","description":"","parent":0,"count":17}],"tags":[298,100,299,297,296,141,96,295],"tags_output":[{"ID":298,"slug":"jest","name":"jest","term_taxonomy_id":298,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":1},{"ID":100,"slug":"react","name":"react","term_taxonomy_id":100,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":3},{"ID":299,"slug":"sass","name":"sass","term_taxonomy_id":299,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":1},{"ID":297,"slug":"typescript","name":"typescript","term_taxonomy_id":297,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":1},{"ID":296,"slug":"webpack","name":"webpack","term_taxonomy_id":296,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":1},{"ID":141,"slug":"%e5%89%8d%e7%ab%af","name":"前端","term_taxonomy_id":141,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":4},{"ID":96,"slug":"%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91","name":"前端开发","term_taxonomy_id":96,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":10},{"ID":295,"slug":"%e5%be%ae%e5%89%8d%e7%ab%af","name":"微前端","term_taxonomy_id":295,"term_group":0,"taxonomy":"post_tag","description":"","parent":0,"count":1}],"thumbnail":["/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg",770,340,false],"thumbnail_mini":["/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-150x150-matrixflipcomapiwpcontentuploadsccomfcccaxxjpg.jpg",150,150,true],"thumbnail_retina":["/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg",770,340,false],"thumbnail_full":["/static-remote/files/c945-com_74f6c1c0c632283a68276851-770x340-1-matrixflipcomapiwpcontentuploadsccomfcccaxjpg.jpg",770,340,false],"date_day":"13","date_month":"05","date_month_e":"May","date_year":"2022","date_weekday":"Friday","title":"理解微前端 - 从部署一套自己的前端开发环境(脚手架)开始","excerpt":"很久以前的前端，没有太多工具化工程化思想，一堆代码塞进去完事儿。如今前端已经很卷，卷到了一个开发环境都够你折腾一宿。那么我们抛开类似nextjs、create-react-app这类的工具或框架，我们该如何从零部署一个属于自己的开发环境呢？这篇文章将讲述如何配置一个基础的脚手架，支持React、TypeScrit和单元测试等必要的功能。在这个基础上，大家能够很方便去个性化脚手架。","content":"\u003cp\u003e很久以前的前端，没有太多工具化工程化思想，一堆代码塞进去完事儿。如今前端已经很卷，卷到了一个开发环境都够你折腾一宿。那么我们抛开类似nextjs、create-react-app这类的工具或框架，我们该如何从零部署一个属于自己的开发环境呢？这篇文章将讲述如何配置一个基础的脚手架，支持React、TypeScrit和单元测试等必要的功能。在这个基础上，也能够很方便去个性化脚手架，让它支持比如Electron、Mobx、Redux、PM2、Express(可用来实现SSR服务端渲染)等你想要的扩展功能。\u003c/p\u003e\n\u003cp\u003e首先，我们要知道对于实际的项目，当然是效率优先，尽可能使用成熟的工具和框架，比如类似Next.js、UmiJS、Ant Design等能够简化UI Elements和脚手架环境的东西，都推荐使用它。他们能够一次性完成常用的UI架构，网站的SEO优化，服务端渲染，资源优化，性能优化(打包，懒加载等)，安全优化等。对于一个项目的快速搭建和稳定性是有比较明显的作用的。这里我们学会从零部署开发环境，一方面可以利于提升自己扩展脚手架的能力，同时也能够在未来的工具和框架运用中，更加灵活的加入自己的想法。\u003c/p\u003e\n\u003cp\u003e实质上，我们现在做的事情就是搭建一个比较基础的“\u003cstrong\u003e微前端架构(Micro-Frontend Architectures)\u003c/strong\u003e”，至于更加丰富的功能，可以在这个基础上不断丰富。目前某些大厂，都开源了自己的微前端架构工具，相当于也是把整个Web架构集于一体，极大提高了前后端分离、开发协作、部署测试发布迭代的整合效率，提高生产效率。萝卜各有所需，如果你的项目没有较多的约束性，可以直接使用现成的微前端架构工具，比如Bit、Piral、Modern.js等。当然如果不学习如何搭建自己的脚手架，一旦脱离了别人帮你写好的框架，你可能会显得很懵~\u003c/p\u003e\n\u003cp\u003e微前端架构其实可以很复杂，复杂到一整个大团队的协作，一个公司的业务体系，甚至不同语言开发者的分布式合作。也可以很简洁，简洁到让他成为自己的生产工具，可以用来开发，调试，可以用来部署发布，可以用来协作交流。这次写这篇文章，其实也是想抛开理论，去从某个角度去理解如何才算是自己的架构？它不一定非要打包发布，不一定非要变成一个系统的框架，微前端架构，其实和自己的生存环境，工作方式息息相关。它并不是一种标准，相当于是人定义的一种规范，一个体系。用得好了，事半功倍，用不好了，还是有不好的影响的：）\u003c/p\u003e\n\u003cp\u003e如果要真正搭建一个微前端架构，是非常复杂的，涉及的知识面很广，但是怎么去理解它的运作，从一个很小的方面去体验，就足够了。真正要使用微前端架构，还是建议引入比较成熟的架构方案，相对于中小型产品，自己瞎折腾下还是可以的。\u003c/p\u003e\n\u003cp\u003e本文分为两大部分，一个是基础配置，一个是深入配置，它将能够更好地适配你的React项目或者传统的Web项目(当然我觉得Vue也是同理的思想)。读完这篇文章，我们将实现一个由浅入深完成一套 \u003ccode\u003eWebpack5+TypeScript+Jest+ESLint+SASS+React \u003c/code\u003e的开发环境，也可以把它当做脚手架成品。\u003c/p\u003e\n\u003cblockquote\u003e\u003cp\u003e\u003cstrong\u003e必须：\u003c/strong\u003e在这之前，我们要确保你已经安装至少\u003cstrong\u003eNode 10+\u003c/strong\u003e以上的版本，我自己电脑目前的Node版本是\u003cstrong\u003ev14.16.0\u003c/strong\u003e。\u003cbr /\u003e\n(假设你的项目名称叫 \u003ccode\u003emy-react-app\u003c/code\u003e, 那么 \u003ccode\u003emy-react-app \u003c/code\u003e文件夹内就包含以下的目录和文件，你可以通过 \u003ccode\u003ecd /{your_directory}/my-react-app\u003c/code\u003e 命令进入你的目录，使用 \u003cstrong\u003enpm \u003c/strong\u003e命令安装和移除依赖项，它也会同时修改 \u003ccode\u003epackage.json\u003c/code\u003e和 \u003ccode\u003epackage-lock.json\u003c/code\u003e 文件，具体怎么操作，相信你使用过Node的话，基本没有啥问题的)\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e目录如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg class=\"alignnone wp-image-24272281 size-full\" src=\"/static-remote/files/13d2346af377784f72099f77-matrixflipcomapiwpcontentuploadsdafffjpg.jpg\" alt=\"\" width=\"858\" height=\"732\" /\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan style=\"color: #ff0000;\"\u003e下面的步骤，尽可能按照顺序来：）\u003c/span\u003e\u003c/p\u003e\n\u003ch3\u003e（一）创建package.json文件\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e创建一个package.json文件，满足Webpack、TypeScript，Jest，ESLint等基本需求\u003c/strong\u003e，同时它也满足基本的JS应用的需求。\u003c/p\u003e\n\u003cp\u003eNode 项目在项目根目录中名为 package.json 的文件中跟踪依赖关系和元数据。这是项目的核心。它包含名称、描述和版本之类的信息，以及运行、开发以及有选择地将项目发布到 npm 所需的信息。如果大家想要详细了解这个文件的用途，可以参看NPM的官方文档 \u003ca href=\"https://docs.npmjs.com/creating-a-package-json-file\" target=\"_blank\" rel=\"noopener\"\u003ehttps://docs.npmjs.com/creating-a-package-json-file\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e关于某些Dependencies，具体的功能根据自己的需求增加，目前我主要针对我们要配置的这个环境选择，多余的依赖就不参与。\u003c/p\u003e\n\u003cp\u003e下面是已经创建好的示例代码(并非最基础的package.json代码)，你可以根据需要修改它们。\u003c/p\u003e\n\u003cpre\u003e{\r\n  \"name\": \"my-react-app\",\r\n  \"version\": \"0.0.1\",\r\n  \"description\": \"My React App.\",\r\n  \"main\": \"dist/my-react-app.js\",\r\n  \"directories\": {\r\n    \"test\": \"test\"\r\n  },\r\n  \"jest\": {\r\n    \"testEnvironment\": \"jsdom\",\r\n    \"transform\": {\r\n      \"^.+\\\\.(js|jsx)$\": \"babel-jest\",\r\n      \"^.+\\\\.(ts|tsx)?$\": \"ts-jest\"\r\n    }\r\n  },\r\n  \"scripts\": {\r\n    \"check\": \"tsc\",\r\n    \"dev\": \"cross-env NODE_ENV=development webpack --progress --mode development --config build/config.js\",\r\n    \"build\": \"cross-env NODE_ENV=production webpack --progress --mode production --config build/config.js\",\r\n    \"test\": \"cross-env NODE_ENV=test jest\"\r\n  },\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"my-react-app\"\r\n  },\r\n  \"keywords\": [\r\n    \"library\"\r\n  ],\r\n  \"license\": \"MIT\",\r\n  \"bugs\": {\r\n    \"url\": \"https://github.com/xizon/my-react-app/issues\"\r\n  },\r\n  \"homepage\": \"https://github.com/xizon/my-react-app#readme\",\r\n  \"devDependencies\": {\r\n    \"@babel/core\": \"^7.13.14\",\r\n    \"@babel/plugin-transform-runtime\": \"^7.16.4\",\r\n    \"@babel/polyfill\": \"^7.0.0\",\r\n    \"@babel/preset-env\": \"^7.2.0\",\r\n    \"@babel/preset-typescript\": \"^7.1.0\",\r\n    \"@types/jest\": \"^27.0.3\",\r\n    \"@typescript-eslint/eslint-plugin\": \"^4.28.5\",\r\n    \"@typescript-eslint/parser\": \"^4.28.5\",\r\n    \"babel-loader\": \"^8.0.4\",\r\n    \"babel-plugin-module-resolver\": \"^4.1.0\",\r\n    \"cross-env\": \"^7.0.3\",\r\n    \"eslint\": \"^7.32.0\",\r\n    \"jest\": \"^27.0.4\",\r\n    \"jsdom\": \"^18.1.1\",\r\n    \"moment\": \"^2.29.1\",\r\n    \"terser-webpack-plugin\": \"^5.1.4\",\r\n    \"ts-jest\": \"^27.0.4\",\r\n    \"ts-node\": \"^10.1.0\",\r\n    \"typescript\": \"^4.3.5\",\r\n    \"webpack\": \"^5.47.1\",\r\n    \"webpack-cli\": \"^4.9.1\"\r\n  },\r\n  \"eslintConfig\": {\r\n    \"parserOptions\": {\r\n      \"parser\": \"@typescript-eslint/parser\",\r\n      \"ecmaVersion\": 2018,\r\n      \"sourceType\": \"module\"\r\n    },\r\n    \"extends\": [\r\n      \"plugin:@typescript-eslint/recommended\"\r\n    ]\r\n  },\r\n  \"dependencies\": {},\r\n  \"author\": \"XXXXXXXXX\"\r\n}\u003c/pre\u003e\n\u003ch3\u003e（二）创建tsconfig.json文件\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003etsconfig.json\u003c/code\u003e 文件用来配置TypeScript\u003c/strong\u003e，具体的配置选项，请阅读官方文档 \u003ca href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.typescriptlang.org/docs/handbook/tsconfig-json.html\u003c/a\u003e，下面是我自己的配置\u003c/p\u003e\n\u003cpre\u003e{\r\n    \"compilerOptions\": {\r\n      \"target\": \"esnext\",\r\n      \"lib\": [\r\n        \"dom\",\r\n        \"dom.iterable\",\r\n        \"esnext\"\r\n      ],\r\n      \"allowJs\": true,\r\n      \"skipLibCheck\": true,\r\n      \"esModuleInterop\": true,\r\n      \"allowSyntheticDefaultImports\": true,\r\n      \"strict\": true,\r\n      \"forceConsistentCasingInFileNames\": true,\r\n      \"module\": \"commonjs\",\r\n      \"moduleResolution\": \"node\",\r\n      \"isolatedModules\": true,\r\n      \"resolveJsonModule\": true,\r\n      \"noEmit\": true,\r\n      \"sourceMap\": true,\r\n      \"declaration\": true,\r\n      \"noUnusedLocals\": false,\r\n      \"noUnusedParameters\": false,\r\n      \"incremental\": true,\r\n      \"noFallthroughCasesInSwitch\": true,\r\n      \"noImplicitAny\": false,\r\n      \"baseUrl\": \"./src\"\r\n    },\r\n    \"include\": [\r\n      \"src/**/*.ts\"\r\n    ],\r\n    \"exclude\": [\"node_modules\"]\r\n}\u003c/pre\u003e\n\u003ch3\u003e（三）创建babel.config.js文件\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003ebabel.config.js\u003c/code\u003e 文件主要用来配置babel\u003c/strong\u003e，什么是babel，如何配置它的功能，请参看官方文档 \u003ca href=\"https://babeljs.io/docs/en/config-files\" target=\"_blank\" rel=\"noopener\"\u003ehttps://babeljs.io/docs/en/config-files\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e下面是我自己的配置代码：\u003c/p\u003e\n\u003cpre\u003emodule.exports = {\r\n  \"presets\": [\r\n\r\n    [\r\n      \"@babel/preset-env\",\r\n      {\r\n        \"targets\": {\r\n          \"node\": \"current\"\r\n        }\r\n      }\r\n    ],\r\n    [\r\n      \"@babel/preset-typescript\"\r\n    ]\r\n  ],\r\n  \"plugins\": [\r\n    [\"@babel/plugin-transform-runtime\",\r\n      {\r\n        \"regenerator\": true\r\n      }\r\n    ],\r\n    [\"module-resolver\", {\r\n      \"root\": [\"./src\"]\r\n    }]\r\n\r\n  ]\r\n};\u003c/pre\u003e\n\u003ch3\u003e（四）创建build/config.js文件\u003c/h3\u003e\n\u003cp\u003e这个文件属于脚手架核心文件，项目的业务需求、开发功能、资源优化、性能、安全等都在这个文件中展示（你可以根据需要，使用多个build文件，这些脚手架文件将和package.json中的命令配置挂钩，让你能够运行它们）\u003c/p\u003e\n\u003cblockquote\u003e\u003cp\u003e\u003cspan style=\"color: #ff0000;\"\u003e注意：path.resolve(__dirname, '../dist') 将返回：   /Applications/......./dist\u003c/span\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e文件的参考代码如下（你可以自由扩展和改良它，如何改良，你可以参看Webpack的官网文档 \u003ca href=\"https://webpack.js.org/concepts/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://webpack.js.org/concepts/\u003c/a\u003e ，目前我们使用Webpack 5以上版本，经过自己的实践，它在性能上要高于4的版本）：\u003c/p\u003e\n\u003cpre\u003e'use strict';\r\n\r\nconst webpack = require('webpack');\r\nconst path = require('path');\r\nconst json = require('../package.json');\r\nconst moment = require('moment');\r\nconst TerserPlugin = require(\"terser-webpack-plugin\");\r\n\r\n/*! \r\n *************************************\r\n *  Main configuration\r\n *************************************\r\n */\r\nconst devMode = process.env.NODE_ENV !== 'production';\r\n\r\nconst webpackConfig = {\r\n\tdevtool: devMode ? 'source-map' : false,\r\n    mode: devMode === 'development' ? 'development' : 'production',\r\n\twatch: true,\r\n    resolve: {\r\n\t\tfallback: {\r\n\t\t    fs: false\r\n\t\t},\r\n        extensions: ['.js', '.ts'],\r\n    },\r\n\t\r\n\tentry: {\r\n\t\t'app': path.resolve(__dirname, '../src/index.ts'),\r\n\t\t'app.min': path.resolve(__dirname, '../src/index.ts')\r\n\t},\r\n\toutput: {\r\n\t  library: {\r\n\t\tname: 'RootLib',\r\n\t\ttype: 'var'\r\n\t  },\r\n\t  filename: '[name].js',\r\n\t  path: path.resolve(__dirname, '../dist'),\r\n\t},\r\n\t/*\r\n\tentry: path.resolve(__dirname, '../src/index.ts'),\r\n\toutput: {\r\n\t  filename: 'app.js',\r\n\t  path: path.resolve(__dirname, '../dist'),\r\n\t},\r\n\t*/\r\n\toptimization: {\r\n\t\tminimize: true,\r\n\t    minimizer: [\r\n\r\n\t\t\tnew TerserPlugin({\r\n\t\t\t\ttest: /\\.min\\.js$/i\r\n\t\t\t}),\r\n\t\t],\r\n\t\t\r\n\t},\r\n    module: {\r\n        rules: [\r\n            {\r\n                test: /\\.(js|ts)$/,\r\n                loader: 'babel-loader',\r\n                exclude: path.resolve( __dirname, 'node_modules' ),\r\n                options: {  \r\n\t\t\t\t  'presets': [\r\n\t\t\t\t\t  '@babel/preset-env',\r\n\t\t\t\t\t  '@babel/preset-typescript'  \r\n\t\t\t\t  ]\r\n                }\r\n\t\t\t},\r\n        ],\r\n\t\t\r\n    },\r\n\tplugins: []\r\n\t\r\n\t\r\n};\r\n\r\n// Add souce maps\r\nwebpackConfig.plugins.push(\r\n\tnew webpack.SourceMapDevToolPlugin({\r\n\t  filename: '../dist/[file].map',\r\n\t})\r\n);\r\n\r\n// Adds a banner to the top of each generated chunk.\r\nwebpackConfig.plugins.push(\r\n    new webpack.BannerPlugin(`\r\n\tMy React App\r\n\r\n\t@source: https://github.com/xizon\r\n\t@version: ${json.version} (${moment().format( \"MMMM D, YYYY\" )})\r\n\t@license: MIT\r\n\t`)\r\n);\r\n\r\n\t\t\t\t\t\t\t\t\t\r\n/*! \r\n *************************************\r\n *  Exporting webpack module\r\n *************************************\r\n */\r\nmodule.exports = webpackConfig;\u003c/pre\u003e\n\u003cblockquote\u003e\u003cp\u003e有些时候我们的项目会发布到npm，然后直接通过Node安装并调用。\u003cbr /\u003e\n(1)注意：如果要使用npm发布的编译包，设置为下面的属性(如果导出的编译包不是为了使用import，则不要使用下面的配置，否则浏览器会报错)：\u003c/p\u003e\n\u003cpre class=\"codePre brush: javascript;\"\u003e\toutput: {\r\n\t\tlibrary: {\r\n\t\t\ttype: 'commonjs'\r\n\t\t},\r\n\t},\u003c/pre\u003e\n\u003cp\u003e直接使用\u0026lt;script src=\"global.js\" \u0026gt;\u0026lt;/script\u0026gt; 也会报错\u003cbr /\u003e\n\u003cspan style=\"color: #ff0000;\"\u003e Uncaught ReferenceError: exports is not defined\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e正确的用法：\u003c/p\u003e\n\u003cpre class=\"codePre brush: javascript;\"\u003e\u0026lt;script\u0026gt;const exports = {\"__esModule\": true};\u0026lt;/script\u0026gt;\r\n\u0026lt;script src=\"global.js\"\u0026gt;\u0026lt;/script\u0026gt;\r\n\u003c/pre\u003e\n\u003cp\u003e(2)并且导出的变量或者函数需要包含 {},如\u003c/p\u003e\n\u003cpre\u003eimport __ from './global';\r\nexport default __;\r\nexport { __ };\u003c/pre\u003e\n\u003cp\u003e(3)使用可以减小编译后的js体积\u003c/p\u003e\n\u003cpre\u003e[\"@babel/preset-env\", { \r\n        \"targets\": {\"esmodules\": true}\r\n}],\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003e至此，一个基础的Webpack5+TypeScript+Jest+ESLint的基础开发环境就已经完成了，接下去，我们还将深入配置React的环境。\u003c/strong\u003e\u003c/p\u003e\n\u003ch3\u003e（五）深入搭建React环境\u003c/h3\u003e\n\u003cp\u003e我们只是完成了基础的功能支持，如果我们需要使用React，那么我们还将进一步配置脚手架。当然，Vue支持也同理。在这个过程中，某些依赖会产生冲突，或者因为TypeScript的某些配置，会造成编译错误，所以我们需要一些测试和检查，就能发现这些错误，并修正一些配置。\u003c/p\u003e\n\u003cp\u003e这些代码都是我经过测试后的基础参考示例代码（大部分已经修正了编译错误），出现JS代码编译错误不要紧，我们只要根据终端的报错，来找出原因，修正脚手架的配置即可。当然，如果是为了方便，你也可以直接使用React官方提供的 \u003ccode\u003ecreate-react-app\u003c/code\u003e 来编写你的应用程序，某些个性化的需求也需要参考文档增加。如果你的项目个性化需求比较多，可以直接创造自己的脚手架，方便混合其它第三方库和工具。不依赖与第三方的架构。\u003c/p\u003e\n\u003cp\u003e接下去我们继续配置React的支持。\u003c/p\u003e\n\u003ch4 style=\"margin-bottom: 1.13043em; line-height: 1.41304em;\"\u003e第1步: 安装React相关的依赖项\u003c/h4\u003e\n\u003cblockquote\u003e\u003cp\u003e后面的步骤，如果需要使用npm命令安装新的依赖，同理进入目录\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e先进入你的项目的目录\u003c/p\u003e\n\u003cpre\u003ecd /{your_directory}/my-react-app\u003c/pre\u003e\n\u003cp\u003e然后运行命令：\u003c/p\u003e\n\u003cpre\u003esudo npm install\u003c/pre\u003e\n\u003cp\u003e补全TypeScript对于React接口的支持，安装：\u003c/p\u003e\n\u003cpre\u003enpm install @types/react --save-dev\u003c/pre\u003e\n\u003cp\u003e安装完基本的依赖，然后安装react的依赖（这几个依赖有什么作用，可以自己去搜索引擎查询一下，一般是我项目里常用的一些依赖项）和继续配置（react入口文件也可以是ts文件）\u003c/p\u003e\n\u003cpre\u003enpm install axios react react-dom react-router-config@5.1.1 react-router-dom@5.2.0\r\nnpm install @babel/preset-react @babel/plugin-proposal-class-properties --save-dev\u003c/pre\u003e\n\u003cp\u003e安装新的依赖后，\u003ccode\u003epackage.json\u003c/code\u003e 文件会自动修改。\u003c/p\u003e\n\u003ch4\u003e第2步: 修改build/config.js\u003c/h4\u003e\n\u003cp\u003e为了适配React，我们需要修改webpack配置文件 \u003ccode\u003ebuild/config.js\u003c/code\u003e，修改后的代码如下（\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）：\u003c/p\u003e\n\u003cpre\u003e   context: __dirname, // to automatically find tsconfig.json\r\n    resolve: {\r\n        extensions: ['.js', '.jsx', '.ts', '.tsx', '.scss', '.sass'],\r\n        alias: {\r\n            // specific mappings.\r\n            // Supports directories and custom aliases for specific files when the express server is running, \r\n             // you need to configure the following files at the same time:\r\n             // 1) `babel.config.js`    --\u0026gt; \"plugins\": [[\"module-resolver\", {\"alias\": {...}} ]]\r\n             //  2) `tsconfig.json`      --\u0026gt; \"compilerOptions\": { \"paths\": {...} }\r\n             //  3) `package.json`       --\u0026gt; \"jest\": { \"moduleNameMapper\": {...} }\r\n             '@': path.resolve(__dirname, '../src')\r\n        }\r\n    },\r\n\t\r\n\tentry: {\r\n\t\t'app': path.resolve(__dirname, '../src/index.js'),\r\n\t\t'app.min': path.resolve(__dirname, '../src/index.js')\r\n\t},\r\n\r\nmodule: {\r\n    rules: [\r\n        {\r\n            test: /\\.(js|jsx|ts|tsx)$/,\r\n            loader: 'babel-loader',\r\n            exclude: path.resolve(__dirname, '../node_modules' ),\r\n            options: {  \r\n              'presets': [\r\n                  '@babel/preset-env',\r\n                  '@babel/preset-react',\r\n                  '@babel/preset-typescript',\r\n                    {\r\n                      plugins: [\r\n                        '@babel/plugin-proposal-class-properties'\r\n                      ]\r\n                    }\t  \r\n              ]\r\n            }\r\n        },\r\n    ],\r\n    \r\n},\u003c/pre\u003e\n\u003cp\u003eBabel的一些插件有什么作用，可以直接去官网多看看文档即可。这里主要说一下 \u003ccode\u003e@babel/plugin-proposal-class-properties\u003c/code\u003e 插件,主要是用来编译的，可以解决一些静态类属性编译的问题。\u003c/p\u003e\n\u003ch4\u003e第3步: 安装SASS开发依赖\u003c/h4\u003e\n\u003cp\u003e不论我们使用css-in-js还是外部引用CSS样式文件，我们都需要配置SASS插件，让其能够编译SASS,SCSS文件，我个人比较喜欢使用SCSS文件，单独外部引用，而不是直接css-in-js, 这样便于我自己维护样式表。\u003c/p\u003e\n\u003cp\u003e运行命令\u003c/p\u003e\n\u003cpre\u003enpm install sass-loader node-sass style-loader css-loader mini-css-extract-plugin@2.4.5 css-minimizer-webpack-plugin --save-dev\u003c/pre\u003e\n\u003cp\u003e\u003cspan style=\"color: #ff0000;\"\u003e【注意】node-sass(7.0.1)和sass-loader(12.4.0)的版本搭配，无需file-loader就可以提取文件。会和file-loader冲突，提取的文件可能无法使用，需要移除file-loader相关配置或者降级到node-sass(4.14.1)和sass-loader(7.1.0)才可搭配file-loader使用\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e安装关联jest单元测试的一个依赖\u003c/p\u003e\n\u003cpre\u003enpm install identity-obj-proxy --save-dev\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eidentity-obj-proxy\u003c/code\u003e 插件使用ES6代理的身份对象， 对模拟CSS模块之类的webpack导入很有用，它可以解决编译时导入CSS的一些错误\u003c/p\u003e\n\u003cp\u003e下面的配置适用于node-sass7.x.x, sass-loader 12.x.x 版本\u003cbr /\u003e\nmini-css-extract-plugin2.5.0版本有bug无法运行\u003cbr /\u003e\n适配CSS文件，修改webpack文件 \u003ccode\u003ebuild/config.js\u003c/code\u003e （\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）\u003c/p\u003e\n\u003cpre\u003econst MiniCssExtractPlugin = require('mini-css-extract-plugin');\r\nconst CssMinimizerPlugin = require(\"css-minimizer-webpack-plugin\");\r\n\r\n\r\noptimization: {\r\n    minimizer: [\r\n        new MiniCssExtractPlugin({\r\n            // Options similar to the same options in webpackOptions.output\r\n            // both options are optional\r\n            filename: '../dist/[name].css'\r\n        }),\r\n        new CssMinimizerPlugin({\r\n            test:/\\.min\\.css$/i,\r\n            parallel: true,\r\n            minimizerOptions: {\r\n                preset: [\r\n                    \"default\",\r\n                    {\r\n                        discardComments: { removeAll: true },\r\n                    },\r\n                ],\r\n            },\r\n        }),\r\n\r\n    ],\r\n},\r\nmodule: {\r\n    rules: [\r\n        {\r\n            test: /\\.(sa|sc|c)ss$/,\r\n            include: [\r\n                path.resolve(__dirname, '../src'),\r\n                // Prevent errors in calling the node library: Module parse failed: Unexpected character'@'\r\n                path.resolve(__dirname, '../node_modules'),\r\n            ],\r\n            use: [\r\n\t   /**\r\n\t  * Note:\r\n\t   * You can use `style-loader` to inject CSS into the DOM to generate a final js file\r\n\t  */\r\n                {\r\n                    loader: MiniCssExtractPlugin.loader, //Extracts CSS into separate files  ( Step 3 )\r\n                    options: {\r\n                        // you can specify a publicPath here\r\n                        // by default it use publicPath in webpackOptions.output\r\n                          publicPath: '../dist/'\r\n\r\n                    }\r\n                },\r\n\r\n                {\r\n                    loader: \"css-loader\",  // interprets @import and url() and will resolve them. ( Step 2 )\r\n                    options: {\r\n                        sourceMap: true\r\n                    }\r\n                },\r\n                {\r\n                    loader: 'sass-loader', // compiles Sass to CSS ( Step 1 )\r\n                    options: {\r\n                        sourceMap: true,\r\n\t\t     sassOptions: {\r\n\t\t\t  /* (nested | expanded | compact | compressed) */\r\n\t\t\t  outputStyle: 'expanded'\r\n\t\t     },\r\n                    }\r\n\r\n                },\r\n            ]\r\n        },\r\n    ],\r\n},\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e提示：\u003c/strong\u003e如果不单独引用生成的 \u003ccode\u003edist/*.css\u003c/code\u003e 文件，使用js内置的css，删除 \u003ccode\u003emini-css-extract-plugin\u003c/code\u003e 和 \u003ccode\u003ecss-minimizer-webpack-plugin\u003c/code\u003e 相关的配置，然后将样式loader修改为下面的代码（\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）：\u003c/p\u003e\n\u003cpre\u003e{\r\n    test: /\\.(sa|sc|c)ss$/,\r\n    include: [\r\n        path.resolve(__dirname, '../src'),\r\n        // Prevent errors in calling the node library: Module parse failed: Unexpected character'@'\r\n        path.resolve(__dirname, '../node_modules'),\r\n    ],\r\n    use: [\r\n        {\r\n            loader: \"style-loader\"  // creates style nodes from JS strings ( Step 3 )\r\n        },\r\n        {\r\n            loader: \"css-loader\",   // interprets @import and url() and will resolve them. \r\n                                    //(translates CSS into CommonJS) ( Step 2 )\r\n            options: {\r\n                sourceMap: true\r\n            }\r\n        },\r\n        {\r\n            loader: 'sass-loader', // compiles Sass to CSS ( Step 1 )\r\n            options: {\r\n                sourceMap: true,\r\n                sassOptions: {\r\n                    /* (nested | expanded | compact | compressed) */\r\n                    outputStyle: 'expanded'\r\n                },\r\n\r\n            }\r\n\r\n        },\r\n    ]\r\n},\u003c/pre\u003e\n\u003ch4\u003e第4步: 继续安装引用文件的开发依赖\u003c/h4\u003e\n\u003cp\u003e执行命令：\u003c/p\u003e\n\u003cpre\u003enpm install raw-loader glslify-loader json-loader file-loader  --save-dev\u003c/pre\u003e\n\u003cblockquote\u003e\u003cp\u003e\u003cstrong\u003e注意(1)：\u003c/strong\u003epath.resolve(__dirname, '../dist') 将返回：   /Applications/......./dist\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e注意(2)：\u003c/strong\u003e\u003ccode\u003emini-css-extract-plugin\u003c/code\u003e 的 \u003ccode\u003epublicPath\u003c/code\u003e 设置会让 \u003ccode\u003efile-loader\u003c/code\u003e 的 \u003ccode\u003epublicPath\u003c/code\u003e 路径失效，导致文件重复提取，可以删除 \u003ccode\u003efile-loader\u003c/code\u003e 插件的相关配置（不删除此配置会导致生成图片解析错误）来解决\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e适配引用的字体，图片等文件，修改webpack文件\u003ccode\u003ebuild/config.js \u003c/code\u003e（\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）\u003c/p\u003e\n\u003cpre\u003emodule: {\r\n    rules: [\r\n        {\r\n            test: /\\.(glsl|vs|fs|vert|frag)$/,\r\n            exclude: path.resolve(__dirname, '../node_modules' ),\r\n            use: [\r\n                'raw-loader',\r\n                'glslify-loader'\r\n            ]\r\n        },\r\n        {\r\n            test: /\\.json$/,\r\n            use: 'json-loader'\r\n        },\r\n        \r\n      // Note:\r\n      // 1) Compatible with node-sass(4+) and sass-loader(7+)\r\n      // 2) The versions of node-sass (7+) and sass-loader (12+) are matched to extract files without `file-loader`\r\n        {\r\n             test: /\\.(png|jpe?g|gif|ttf|eot|svg|woff(2)?)(\\?[a-z0-9=\u0026amp;.]+)?$/,\r\n            loader: 'file-loader', \r\n            options: {\r\n              esModule: false, //change the css path via output\r\n\t\tname (file) {\r\n\t\t    return '[name]_[hash].[ext]'\r\n\t\t},\r\n              outputPath: (url, resourcePath, context) =\u0026gt; { //the files from `./src/...` will copy to `./dist/`\r\n                  \r\n                 //original name: path.basename(resourcePath)\r\n                 \r\n                 //fonts\r\n                 if ( resourcePath.indexOf( 'webfonts/' ) \u0026gt;= 0 || resourcePath.indexOf( 'fonts/' ) \u0026gt;= 0 ) {\r\n                     return '../dist/fonts/' + url;\r\n                 }\r\n                  \r\n                 //imags\r\n                 if ( resourcePath.indexOf( 'images/' ) \u0026gt;= 0 || resourcePath.indexOf( 'img/' ) \u0026gt;= 0 ) {\r\n                     return '../dist/mages/' + url;\r\n                 } \r\n                  \r\n                     \r\n                 return '../dist/misc/' + url;\r\n                \r\n              },\r\n              publicPath: (url, resourcePath, context) =\u0026gt; { //the css path of output \r\n                 \r\n                // If the file is in the root directory, you can leave it empty. If in another directory, \r\n                // you can write: \"/blog\". (but no trailing slash)\r\n                const websiteRootDir = '';\r\n\r\n\r\n                 //fonts\r\n                 if ( resourcePath.indexOf( 'webfonts/' ) \u0026gt;= 0 || resourcePath.indexOf( 'fonts/' ) \u0026gt;= 0 ) {\r\n                     return `${websiteRootDir}/dist/fonts/${url}`;\r\n                 }\r\n                \r\n                 //imags\r\n                 if ( resourcePath.indexOf( 'images/' ) \u0026gt;= 0 || resourcePath.indexOf( 'img/' ) \u0026gt;= 0 ) {\r\n                     return `${websiteRootDir}/dist/images/${url}`;\r\n                 } \r\n                  \r\n                     \r\n                 return `${websiteRootDir}/dist/misc/${url}`;\r\n                  \r\n                \r\n              }\r\n            }\r\n        }\r\n\r\n    ],\r\n},\u003c/pre\u003e\n\u003ch4\u003e第5步: 继续安装webpack本地开发服务器开发依赖\u003c/h4\u003e\n\u003cp\u003e运行命令\u003c/p\u003e\n\u003cpre\u003enpm install webpack-dev-server  --save-dev\u003c/pre\u003e\n\u003cp\u003e适配4.x.x以上版本的本地服务，修改webpack文件\u003ccode\u003ebuild/config.js\u003c/code\u003e （\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）\u003c/p\u003e\n\u003cblockquote\u003e\u003cp\u003e设置 \u003ccode\u003estatic\u003c/code\u003e 参数后，\u003ccode\u003epublic/index.html\u003c/code\u003e 内的文件路径可以写成如：\u003ccode\u003e../dist/app.min.css\u003c/code\u003e, 使用 \u003ccode\u003elocalhost:8080/public/index.html\u003c/code\u003e 访问，不设置此参数，则会自动定位到 \u003ccode\u003epublic\u003c/code\u003e 和 \u003ccode\u003edist\u003c/code\u003e 文件夹。可以直接使用 \u003ccode\u003elocalhost:8080\u003c/code\u003e 访问\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e代码如下：\u003c/p\u003e\n\u003cpre\u003econst WebpackDevServer = require('webpack-dev-server');\r\n\r\n/*! \r\n *************************************\r\n *  Listen the server\r\n *************************************\r\n */\r\n\r\nconst server = new WebpackDevServer(compiler, {\r\n\t // After setting the static parameter, the file path in `public/index.html` can be written as: `../dist/app.min.css`\r\n\t static: path.resolve(__dirname, '../' ),\r\n\t hot: true,\r\n\t // Disables a full-screen overlay in the browser when there are compiler errors or warnings.\r\n\t client: {\r\n\t\t overlay: {\r\n\t\t\t warnings: false,\r\n\t\t\t errors: true\r\n\t\t }\r\n\t },\r\n\r\n});\r\n\r\nserver.listen(8080, \"localhost\", function (err, result) {\r\n\tif (err) {\r\n\t\treturn console.log(err);\r\n\t}\r\n\r\n\tconsole.log( 'Listening at http://localhost:8080/');\r\n})\r\n\u003c/pre\u003e\n\u003ch4\u003e第6步: 修改package.json文件的eslintConfig和jest部分\u003c/h4\u003e\n\u003cp\u003e修改后的代码如下（\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）\u003c/p\u003e\n\u003cpre\u003e  \"jest\": {\r\n    \"moduleNameMapper\": {\r\n      \"\\\\.(css|less|scss|sass)$\": \"identity-obj-proxy\",\r\n      \"^@/(.*)\": \"/src/$1\"\r\n    },\r\n  },\r\n \"eslintConfig\": {\r\n    \"parserOptions\": {\r\n      \"parser\": \"@typescript-eslint/parser\",\r\n      \"ecmaVersion\": 2018,\r\n      \"sourceType\": \"module\",\r\n      \"ecmaFeatures\": {\r\n        \"jsx\": true\r\n      }\r\n    },\r\n    \"extends\": [\r\n      \"plugin:react/recommended\",\r\n      \"plugin:@typescript-eslint/recommended\"\r\n    ],\r\n    \"rules\": {},\r\n    \"settings\": {\r\n      \"react\": {\r\n        \"version\": \"detect\"\r\n      }\r\n    }\r\n  },\u003c/pre\u003e\n\u003cp\u003e别名如果指定更多，\u003ccode\u003epackage.json\u003c/code\u003e 文件的 \u003ccode\u003eeslintConfig\u003c/code\u003e 和 \u003ccode\u003ejest\u003c/code\u003e 部分可以写成：\u003c/p\u003e\n\u003cpre\u003e...\r\n  \"jest\": {\r\n    \"testEnvironment\": \"jsdom\",\r\n    \"moduleNameMapper\": {\r\n      \"\\\\.(css|less|scss|sass)$\": \"identity-obj-proxy\",\r\n      \"^@app.react/config/(.*)\": \"/src/config/$1\",\r\n      \"^@app.react/components/(.*)\": \"/src/client/components/$1\",\r\n      \"^@app.react/router/(.*)\": \"/src/client/router/$1\",\r\n      \"^@app.react/helpers/(.*)\": \"/src/client/helpers/$1\",\r\n      \"^@app.react/services/(.*)\": \"/src/client/services/$1\",\r\n      \"^@app.react/reducers/(.*)\": \"/src/client/reducers/$1\",\r\n      \"^@app.react/pages/(.*)\": \"/src/client/views/_pages/$1\",\r\n      \"^@app.react/actions/(.*)\": \"/src/client/actions/$1\",\r\n      \"^@app.react/server/(.*)\": \"/src/server/$1\",\r\n      \"^@app.react/store/(.*)\": \"/src/store/$1\"\r\n    },\r\n    \"transform\": {\r\n      \"^.+\\\\.(js|jsx)$\": \"babel-jest\",\r\n      \"^.+\\\\.(ts|tsx)?$\": \"ts-jest\"\r\n    }\r\n  },\r\n…\r\n\u003c/pre\u003e\n\u003ch4\u003e第7步: 修改tsconfig.json文件\u003c/h4\u003e\n\u003cp\u003e\u003cspan style=\"color: #ff0000;\"\u003e特别注意：\u003ccode\u003ebaseUrl\u003c/code\u003e, \u003ccode\u003e\"@/*\": [\"*\"]\u003c/code\u003e 和 \u003ccode\u003einclude\u003c/code\u003e，这几个连带的设置不能出错。\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e参考代码如下（\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）\u003c/p\u003e\n\u003cpre\u003e{\r\n    \"compilerOptions\": {\r\n      \"jsx\": \"react\",\r\n     \"baseUrl\": \"./src\",\r\n      \"paths\": {\r\n        \"@/*\": [\"*\"]\r\n        }\r\n    },\r\n    \"include\": [\r\n      \"src/**/*.ts\", \"src/**/*.tsx\"\r\n    ],\r\n}\u003c/pre\u003e\n\u003cp\u003e别名如果指定更多，\u003ccode\u003etsconfig.json\u003c/code\u003e 可以写成：\u003c/p\u003e\n\u003cpre\u003e...\r\n      \"baseUrl\": \"./src\",\r\n      \"paths\": {\r\n        \"@app.react/config/*\": [\"config/*\"],\r\n        \"@app.react/components/*\": [\"client/components/*\"],\r\n        \"@app.react/router/*\": [\"client/router/*\"],\r\n        \"@app.react/helpers/*\": [\"client/helpers/*\"],\r\n        \"@app.react/services/*\": [\"client/services/*\"],\r\n        \"@app.react/reducers/*\": [\"client/reducers/*\"],\r\n        \"@app.react/pages/*\": [\"client/views/_pages/*\"],\r\n        \"@app.react/actions/*\": [\"client/actions/*\"],\r\n        \"@app.react/server/*\": [\"server/*\"],\r\n        \"@app.react/store/*\": [\"store/*\"]\r\n      }\r\n    },\r\n…\u003c/pre\u003e\n\u003ch4\u003e第8步: 修改babel.config.js文件\u003c/h4\u003e\n\u003cp\u003e参考代码如下（\u003cspan style=\"background-color: #ffff00;\"\u003e自己可以对比之前的基础代码\u003c/span\u003e）\u003c/p\u003e\n\u003cpre\u003emodule.exports = {\r\n  \"presets\": [\r\n    [\r\n      \"@babel/preset-react\"\r\n    ],\r\n  ],\r\n  \"plugins\": [\r\n    [\r\n      \"@babel/plugin-proposal-class-properties\"\r\n    ],\r\n    [\"module-resolver\", {\r\n      \"root\": [\"./src\"],\r\n      \"alias\": {\r\n        \"@/\": \"./src\"\r\n      }\r\n    }]\r\n\r\n  ]\r\n};\u003c/pre\u003e\n\u003cp\u003e别名如果指定更多，\u003ccode\u003ebabel.config.js\u003c/code\u003e 可以写成：\u003c/p\u003e\n\u003cpre\u003e...\r\n    [\"module-resolver\", {\r\n      \"root\": [\"./src\"],\r\n      \"alias\": {\r\n        \"@app.react/config\": \"./src/config\",\r\n        \"@app.react/components\": \"./src/client/components\",\r\n        \"@app.react/router\": \"./src/client/router\",\r\n        \"@app.react/helpers\": \"./src/client/helpers\",\r\n        \"@app.react/services\": \"./src/client/services\",\r\n        \"@app.react/reducers\": \"./src/client/reducers\",\r\n        \"@app.react/pages\": \"./src/client/views/_pages\",\r\n        \"@app.react/actions\": \"./src/client/actions\",\r\n        \"@app.react/server\": \"./src/server\",\r\n        \"@app.react/store\": \"./src/store\"\r\n      }\r\n    }]\r\n \r\n…\r\n\u003c/pre\u003e\n\u003ch4\u003e第9步: 修改webpack的externals属性【可选】\u003c/h4\u003e\n\u003cp\u003e根据需要修改webpack的排除文件夹，方便创建npm包发布的编译文件。\u003ccode\u003eexternals\u003c/code\u003e 属性防止将某些 import 的包(package)打包到 bundle 中,而是在运行时(runtime)再去从外部获取这些扩展依赖(external dependencies)。参考代码如下：\u003c/p\u003e\n\u003cpre\u003e\t//Exclude react from bundle\r\n\texternals: [\r\n\t\t{\r\n\t\t\t// String\r\n\t\t\t'react': 'React',\r\n\t\t\t'react-dom': 'ReactDOM',\r\n\t\t},\r\n\t\t// Function\r\n\t\tfunction ({ context, request }, callback) {\r\n\r\n\t\t\t// Use the same './_all' path to prohibit loading of general style sheets\r\n\t\t\tif ( request.indexOf( '@/components/_utils/styles' ) \u0026gt;= 0 ) {\r\n\t\t\t\treturn callback(null, 'commonjs ' + './_all');\r\n\t\t\t}\r\n\r\n\t\t\tif ( request.indexOf( '@/components/_utils/_all' ) \u0026gt;= 0 ) {\r\n\t\t\t\treturn callback(null, 'commonjs ' + './_all');\r\n\t\t\t}\t\r\n\t\t\tcallback();\r\n\t\t},\r\n\t\t// Regex\r\n\t\t/^(jquery|\\$)$/i,\r\n\t],\r\n\u003c/pre\u003e\n\u003ch4\u003e第10步: 根据需要定义webpack的插件【可选】\u003c/h4\u003e\n\u003cp\u003e下面的例子定义了一个编译完成后的插件，遍历目录并且移动删除。\u003c/p\u003e\n\u003cpre\u003e/*! \r\n *************************************\r\n *  Run command after webpack build\r\n *************************************\r\n */\r\n const glob = require('glob');\r\n const fs = require('fs');\r\n \r\n \r\n const packagesRoot = glob.sync( path.resolve(__dirname, '../packages/*/*.ts') );\r\n const packagesSub = glob.sync( path.resolve(__dirname, '../packages/*.ts') );\r\n const packages = packagesRoot.concat( packagesSub );\r\n const componentsEntry = {};\r\n packages.map( ( path ) =\u0026gt; {\r\n     const filename = path.split( '/' ).pop().replace('.ts', '');\r\n     componentsEntry[ filename ] = path;\r\n });\r\n \r\n console.log( 'componentsEntry: ', componentsEntry );\r\n\r\n class MyPluginCompiledFunction {\r\n\t// Define `apply` as its prototype method which is supplied with compiler as its argument\r\n\tapply(compiler) {\r\n\t\t// Specify the event hook to attach to\r\n\t\tcompiler.hooks.done.tap('MyPluginCompiledFunction', (compilation) =\u0026gt; {\r\n\r\n\t\t\t//Move the components to folders of root directory\r\n\t\t\tconst comNames = Object.keys( componentsEntry );\r\n\t\t\tpackages.map( ( comPath, index ) =\u0026gt; {\r\n\t\t\t\t\r\n\t\t\t\tconst newDir = path.resolve(__dirname, `../${comNames[index]}`);\r\n\t\t\t\tconst oldPath = path.resolve(__dirname, `../dist/cjs/${comNames[index]}.js`);\r\n\t\t\t\tconst newPath = `${newDir}/index.js`;\r\n\t\t\t\t\r\n\t\t\t\tif (!fs.existsSync(newDir)){\r\n\t\t\t\t\tfs.mkdirSync(newDir);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfs.rename(oldPath, newPath, function (err) {\r\n\t\t\t\t  if (err) throw err\r\n\t\t\t\t  console.log(`Successfully ${comNames[index]}.js moved!`);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t\t//remove old folder\r\n\t\t\t// Where the recursive option deletes the entire directory recursively.\r\n\t\t\tfs.rmdirSync(path.resolve(__dirname, '../dist/cjs'), { recursive: true });\r\n\t\t\t\r\n\t\t});\r\n\t}\r\n}\r\n  \r\n\r\n/*! \r\n *************************************\r\n *  Main configuration\r\n *************************************\r\n */\r\n module.export = {\r\n    ...\r\n\tplugins: [ new MyPluginCompiledFunction() ]\r\n};\u003c/pre\u003e\n\u003ch4\u003e第11步: 根据需要定义Node脚本【可选】\u003c/h4\u003e\n\u003cp\u003e脚本可以单独分离出来，抛弃webpack，直接执行，使用node来执行JS文件即可修改 \u003ccode\u003epackage.json\u003c/code\u003e 文件：\u003c/p\u003e\n\u003cpre\u003e  \"scripts\": {\r\n    \"clear\": \"node xxx.js\"\r\n  }\u003c/pre\u003e\n\u003ch3\u003e（六）使用webpack内置生成HTML功能\u003c/h3\u003e\n\u003cp\u003e如果创建Electron应用，需要单独调用生成的js，所以内置生成HTML的功能暂时不使用。这里做一个配置参考。\u003c/p\u003e\n\u003cp\u003e您可以手动创建 \u003ccode\u003epublic/index.html\u003c/code\u003e 来加载 \u003ccode\u003edist\u003c/code\u003e 里生成的 \u003ccode\u003eapp.min.css\u003c/code\u003e 和 \u003ccode\u003eapp.min.js\u003c/code\u003e，8080端口将默认运行 \u003ccode\u003epublic\u003c/code\u003e 里的\u003ccode\u003eindex.html\u003c/code\u003e,它将自动定位到dist的文件，所以无需增加dist的二级目录。直接写 \u003ccode\u003eapp.min.css\u003c/code\u003e 和 \u003ccode\u003eapp.min.js\u003c/code\u003e 即可\u003c/p\u003e\n\u003cp\u003e（\u003ccode\u003ewebpack-dev-server\u003c/code\u003e 设置 \u003ccode\u003estatic\u003c/code\u003e参数后，\u003ccode\u003epublic/index.html\u003c/code\u003e 内的文件路径可以写成如：\u003ccode\u003e../dist/app.min.css\u003c/code\u003e, 使用 \u003ccode\u003elocalhost:8080/public/index.html\u003c/code\u003e 访问）\u003c/p\u003e\n\u003cp\u003e到目前为止，我们都是在 index.html 文件中手动引入所有资源，然而随着应用程序增长，并且一旦开始 在文件名中使用 hash 并输出 多个 bundle，如果继续手动管理 index.html 文件，就会变得困难起来。然而，通过一些插件可以使这个过程更容易管控。\u003c/p\u003e\n\u003cp\u003e我们使用webpack的HTML生成功能直接打包生成，并且导入资源。参看：\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://webpack.docschina.org/guides/asset-management/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://webpack.docschina.org/guides/asset-management/\u003c/a\u003e\u003cbr /\u003e\n\u003ca href=\"https://webpack.docschina.org/guides/output-management/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://webpack.docschina.org/guides/output-management/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e使用内置的\u003ca href=\"https://webpack.docschina.org/guides/asset-modules/\" target=\"_blank\" rel=\"noopener\"\u003eAsset Modules\u003c/a\u003e来导入图片文件等，使用 \u003ccode\u003eHtmlWebpackPlugin\u003c/code\u003e 插件来生成HTML文件\u003c/p\u003e\n\u003ch3 style=\"line-height: 1.42188em;\"\u003e（七）结语\u003c/h3\u003e\n\u003cp\u003e好了，我们已经完成了从基础到深入的基础脚手架搭建，属于自己的一个微前端架构算是完成了一个雏形，以其说是雏形，也可以说其实可以直接用于部分适合需求的项目。你也可以再次基础上增加更多的配置，比如PM2的支持，Express的支持，资源压缩优化等等功能。\u003c/p\u003e\n\u003cp\u003e都到这里了，接下去，我们要做一个项目，我们可以使用自己的脚手架，也可以大胆的使用诸如nextjs或者create-react-app这类的工具了，底气足了，学习起来是不是更有干劲了？如果文章对你有帮助，也可以持续关注我，不定期更新一个小技巧。\u003c/p\u003e\n","slug":"b214e53f0c655e422783718d","prev":[{"ID":903333,"title":"CentOS 8.0  LEMP环境的性能与安全优化指南2022版","excerpt":"在上一篇文章《从零部署Linux服务器完全指南2022版(CentOS 8+Nginx+PHP)》的基础上，我们完成了LEMP环境的部署，接下去为了提高网站运行的稳定性，我们将对其进行进一步的性能与安全优化。","slug":"performance-and-security-optimization-guide-for-centos8-lemp-environment-2022","post_date":"2022-04-21 16:35:43","post_date_gmt":"2022-04-21 16:35:43","thumbnail":["/static-remote/files/c945-com_98d2146dd4b7cd755d21140c-770x340-1-matrixflipcomapiwpcontentuploadsccomdddbcddcxjpg.jpg",770,340,false],"thumbnail_mini":["/static-remote/files/c945-com_98d2146dd4b7cd755d21140c-770x340-1-150x150-matrixflipcomapiwpcontentuploadsccomdddbcddcxxjpg.jpg",150,150,true],"thumbnail_retina":["/static-remote/files/c945-com_98d2146dd4b7cd755d21140c-770x340-1-matrixflipcomapiwpcontentuploadsccomdddbcddcxjpg.jpg",770,340,false]}],"next":[{"ID":24272658,"title":"前端框架带来的疑惑与是非","excerpt":"说到框架，行业间的人都无数在争执前后端分离的Vue和React，跨平台软件开发的Qt 和Electron，快速搭建整站的高性能解决方案并可满足全栈需求的Nextjs和Gatsby，它们都有各自的职责和特色，整体上都是为了解决一些共同的问题。那作为用户到底怎么去看待？涉及到业务领域，那么相对应的产品的业务框架，到底又是什么？有没有现成的\"框架\"以供使用？这些问题总是在各种社区充满了战火。","slug":"the-confusion-of-the-front-end-framework","post_date":"2022-11-18 02:25:38","post_date_gmt":"2022-11-18 02:25:38","thumbnail":[],"thumbnail_mini":[],"thumbnail_retina":[]}],"post_date":"2022-05-13 08:15:01","post_date_gmt":"2022-05-13 08:15:01","post_status":"publish","comment_status":"open","ping_status":"open","post_password":"","to_ping":"","pinged":"","post_modified":"2022-11-18 02:31:20","post_modified_gmt":"2022-11-18 02:31:20","post_content_filtered":"","post_parent":0,"guid":"https://matrixflip.com/api/?p=24272280","menu_order":0,"post_type":"post","post_mime_type":"","comment_count":"0","filter":"raw"},"postID":"b214e53f0c655e422783718d"},"__N_SSG":true},"page":"/article/[id]","query":{"id":"b214e53f0c655e422783718d.html"},"buildId":"mA6qrr95JJaIAp835t1EV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>