(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{2482:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/search/index.html",function(){return a(32)}])},32:function(e,t,a){"use strict";a.r(t);var s=a(5893),n=a(9008),l=a.n(n),r=a(1664),c=a.n(r),i=a(1163),o=a(1119),d=a(7725),u=a(5846),h=a(9334),m=a(7294),p=a(1420),f=a.n(p),g=a(9669),x=a.n(g),j=a(8599),_=a(6603),N=a(3413),E=a(1560),S=a(5798);t.default=function(){let[e,t]=(0,m.useState)(!1),a=(0,i.useRouter)(),n=a.query.s,r="string"==typeof n?n.includes(" ")?n.split(" "):[n]:"",p=a.query.page,g=isNaN(p)?1:p,v=N.j,[y,R]=(0,m.useState)([]),[b,A]=(0,m.useState)(1),[T,w]=(0,m.useState)(parseFloat(p));function L(e){let t=e;return Array.isArray(r)&&r.forEach(e=>{let a=RegExp(e,"ig");t=t.replace(a,'<span style="background:yellow">'+e+"</span>")}),t}return(0,m.useEffect)(()=>{!function(e){let t=encodeURIComponent(e);x().get(f().THEME_SEARCH_POSTS.replace("{DISPLAY_NUMBER}","0").replace("{PAGE_NUMBER}","0").replace("{ENABLE_STAT}","1").replace("{SEARCH_STR}",t)).then(e=>{if(200!==e.data.code||0===e.data.data.total){R([]);return}A(Math.ceil(e.data.data.total/v)),x().get(f().THEME_SEARCH_POSTS.replace("{DISPLAY_NUMBER}",v).replace("{PAGE_NUMBER}",g).replace("{ENABLE_STAT}","0").replace("{SEARCH_STR}",t)).then(e=>{if(200!==e.data.code)return;let t=e.data,a=JSON.stringify(t),s=(0,E.matchAllFilesUrls)(a);s.forEach(e=>{let t=(0,S.renameFile)(e),s=RegExp(e,"g");a=a.replace(s,"/static-remote/files/".concat(t))}),t=JSON.parse(a);let n=t.data.filter(e=>{let t=e.categories_output,a=!0;return t.every(e=>{if(e.name.toLowerCase().includes("[work]"))return a=!1,!1}),a});R(n)})})}(n);let e=[],a=document.getElementsByTagName("img");for(let s=0;s<a.length;s++)e.push({url:a[s].src,type:"img"});(0,_.Z)(e,function(e){t(!0)}).then(function(){t(!1)}),w(parseFloat(p))},[p,n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"关键词:".concat(n,"  - 没位道")})}),(0,s.jsxs)("main",{className:"main-wrapper",children:[(0,s.jsx)(o.Z,{loadingFromPage:"".concat(e?"":"loaded")}),(0,s.jsx)(u.Z,{}),(0,s.jsx)("section",{className:"section section-padding",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col-md-8 offset-md-2",children:[(0,s.jsxs)("p",{className:"text-center d-block full-width p-3 pt-0",children:["关键词：",n]}),(0,s.jsx)(h.Z,{searchPage:!0,dValue:n}),(0,s.jsx)("div",{className:"blog-container",children:y?y.map((e,t)=>(0,s.jsxs)("div",{className:"blog-grid",children:[(0,s.jsx)("h3",{className:"title",children:(0,s.jsx)(c(),{href:"/article/".concat(e.slug,".html"),dangerouslySetInnerHTML:{__html:L(e.title)}})}),(0,s.jsx)("div",{className:"info",children:(0,s.jsxs)("ul",{className:"blog-meta list-unstyled",children:[(0,s.jsxs)("li",{children:[e.date_month_e," ",e.date_day,", ",e.date_year]}),(0,s.jsx)("li",{children:e.categories_output?e.categories_output.map((t,a)=>a<e.categories_output.length-1?(0,s.jsxs)("span",{children:[t.name," ,"]},a):(0,s.jsx)("span",{children:t.name},a)):(0,s.jsx)(s.Fragment,{})})]})}),(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:L(e.excerpt)}})]},t)):(0,s.jsx)(s.Fragment,{children:"Loading..."})})]})}),b==p&&1==b?null:(0,s.jsx)("div",{className:"text-center text-md-left full-width",children:(0,s.jsx)(j.Z,{apiUrl:"/articles/search/index.html?page={page}&s=".concat(n),gotoPageClickEvent:function(e){w(e)},pageRangeDisplayed:3,activePage:T,totalPages:b,previousLabel:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("i",{className:"fas fa-chevron-left"})}),nextLabel:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("i",{className:"fas fa-chevron-right"})}),firstLabel:!1,lastLabel:!1,align:"center",symmetry:!0,breakLabel:"..."})})]})}),(0,s.jsx)(d.Z,{})]})]})}},9334:function(e,t,a){"use strict";var s=a(5893),n=a(1163),l=a(7294);let r=e=>{let{searchPage:t=!1,dValue:a=""}=e,r=(0,n.useRouter)(),c=(0,l.useRef)(null);function i(e){e.preventDefault();let t=c.current,a=t.value.trim().split(/\s+/);r.push("/articles/search/index.html?page=1&s="+a.join("+"))}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"form-outer form-custom form-custom--search",children:(0,s.jsx)("div",{className:"searchform-container",children:(0,s.jsxs)("form",{id:"app-search-box",onSubmit:i,children:[(0,s.jsx)("input",{onFocus:function(e){e.target.setSelectionRange(0,e.target.value.length)},ref:c,id:"search",name:"search",type:"text",autoComplete:"off",defaultValue:a}),(0,s.jsx)("a",{href:"#",onClick:i,children:(0,s.jsx)("i",{className:"fa fa-search","aria-hidden":"true"})})]})})})})};t.Z=r}},function(e){e.O(0,[424,669,355,282,774,888,179],function(){return e(e.s=2482)}),_N_E=e.O()}]);