/*
   - Modification: 没位道  https://www.c945.com
   - Update: 2014/6/12
   - Required: jqery 1.7+
*/
(function($){$.fn.DS_CoolSlider=function(opts){var defaults={sBody:$('.slider'),sUnits:$('#carousel'),sHandle:$('.handler'),sPager:$('#slider-pager'),switchAnimType:0,autoAnim:true,autoAnimDelay:5000,scrollerSwitch:true,switchSpeed:800,complete:function(){},pagination:false,paginationClickLoadEvent:function(){}},o=$.extend({},defaults,opts);return this.each(function(){var _Tnum1=Math.ceil(sBodyWidth/sUnitWidth);var $this=$(this),$units=o.sUnits,$pager=o.sPager,$handle=o.sHandle,$pagerCurrer=$pager.children(':eq(0)'),$pagerTotaler=$pager.children(':last'),sUnitNum=$units.children().length,sUnitWidth=$units.children(':eq(0)').width(),sBodyWidth=o.sBody.width(),sUnitsWidth=sUnitWidth*sUnitNum,moveUnitNum=1,showUnitNum=_Tnum1,hasPager=$pager.length,getautoAnim=o.autoAnim,getpagination=o.pagination,getswitchAnimType=o.switchAnimType,getautoAnimDelay=o.autoAnimDelay,getComplete=o.complete,getpaginationClickLoadEvent=o.paginationClickLoadEvent,getScrollerSwitch=o.scrollerSwitch,$switchSpeed=o.switchSpeed,sUnitsLeft=0,sWidth,sNum;var mouseWheelandClickChk=true;var autoEvent=true;var nindex=sUnitNum-1;var currIndex;$units.css("width",sUnitWidth*sUnitNum+"px");for(var hk=1;hk<=sUnitNum;hk++){if(hk==sUnitNum){$pager.prepend('<a data-index="0"  data-click="0" href="javascript:" class="active"></a>')}else{$pager.prepend('<a data-index="'+nindex+'" data-click="0" href="javascript:" ></a>')};nindex=nindex-1};$pager.prepend('<div id="pager-mask" style="width:100%; height:200%;background:url(none.gif); display:none; position:absolute; top:0; left:0; z-index:1; "></div>');if(sUnitsWidth>sBodyWidth){if(sUnitNum<(moveUnitNum*showUnitNum)){sNum=1;sWidth=sUnitWidth}else{sNum=moveUnitNum;sWidth=sUnitWidth*moveUnitNum};$units.width(sUnitsWidth);if(typeof $units.children().attr('i')==='undefined'){$units.children().each(function(i){$(this).attr('i',i)})};if(hasPager){$pagerCurrer.text(1);$pagerTotaler.text(sUnitNum)};if(getpagination==true){$pager.find("a").click(function(){clearInterval(_ani);setTimeout(function(){startAutoAm()},$switchSpeed);$("#pager-mask").css("display","block");setTimeout(function(){$("#pager-mask").css("display","none")},$switchSpeed*2);sliderGoindex($(this).attr("data-index"))})};function sliderGoindex(num){var _pi=num;if(parseFloat(_pi)>=parseFloat(sUnitNum)){_pi=0};if(_pi==-1){_pi=sUnitNum-1};var _thisSlider=$pager.find("a:eq("+_pi+")");var _ci=_thisSlider.attr("data-click");$pager.find("a").each(function(index){$(this).attr("data-click",0)});_thisSlider.attr("data-click",1);if(getswitchAnimType==0){$units.stop().animate({left:-sWidth*_pi+"px"},$switchSpeed,function(){getpaginationClickLoadEvent();getComplete.animation[_pi]()})}else{$units.stop().animate({opacity:0},$switchSpeed,function(){$units.css("left",-sWidth*_pi+"px");getpaginationClickLoadEvent();getComplete.animation[_pi]();$units.animate({opacity:1},$switchSpeed)})};$pager.find("a").each(function(index){$(this).removeClass("active")});$pager.find("a[data-click='1']").addClass("active")};var _ani;var _autoAindex=0;function startAutoAm(){if(getautoAnim==true){_ani=setInterval(function(){FunhandlerRight()},getautoAnimDelay)}};if(getautoAnim==true){if(autoEvent==true){if(parseFloat(getautoAnimDelay)<parseFloat($switchSpeed*2)){getautoAnimDelay=$switchSpeed*2};startAutoAm()}};if(getScrollerSwitch==true){$(document).bind('mousewheel',function(event,delta){autoEvent=false;clearInterval(_ani);if(delta<0){if(mouseWheelandClickChk==true){FunhandlerRight();mouseWheelandClickChk=false;setTimeout(function(){mouseWheelandClickChk=true;autoEvent=true},$switchSpeed*2)}}else{if(mouseWheelandClickChk==true){FunhandlerLeft();mouseWheelandClickChk=false;setTimeout(function(){mouseWheelandClickChk=true;autoEvent=true},$switchSpeed*2)}}})};if(mouseWheelandClickChk==true){$this.find("[data-dir='left']").bind('click',function(){FunhandlerLeft()});$this.find("[data-dir='right']").bind('click',function(){FunhandlerRight()})};function FunhandlerLeft(){$this.find("[data-dir='left']").unbind('click');mouseWheelandClickChk=false;setTimeout(function(){mouseWheelandClickChk=true;$this.find("[data-dir='left']").bind('click',function(){FunhandlerLeft()})},$switchSpeed*2);clearInterval(_ani);setTimeout(function(){startAutoAm()},$switchSpeed);if($pager.find("a").hasClass("active")){var goAindex=parseFloat($pager.find(".active").attr("data-index"))-1;if(goAindex==-1){goAindex=sUnitNum-1};sliderGoindex(goAindex)}};function FunhandlerRight(){$this.find("[data-dir='right']").unbind('click');mouseWheelandClickChk=false;setTimeout(function(){mouseWheelandClickChk=true;$this.find("[data-dir='right']").bind('click',function(){FunhandlerRight()})},$switchSpeed*2);clearInterval(_ani);setTimeout(function(){startAutoAm()},$switchSpeed);if($pager.find("a").hasClass("active")){var goAindex=parseFloat($pager.find(".active").attr("data-index"))+1;if((parseFloat(goAindex)-1)==parseFloat(nindex)){goAindex=0};sliderGoindex(goAindex)}}}})}})(jQuery);


/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);



